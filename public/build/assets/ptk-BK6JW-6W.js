import{_ as ia,r as C,V as ra,a as ma,i as _a}from"./VForm-44mxsf6a.js";import{a5 as ta,a6 as la,a9 as sa,b as e,p as E,a8 as fa,X as pa,a7 as ga,bk as ka,an as Z,aa as ca,F as I,E as ba,r as _,c as V,f as N,l,e as t,k as G,a2 as W,a as Va,o as m,ay as va,s as v,a0 as X,Z as ya,d as s,t as f,h as ja,$ as Ta}from"./main-BpB0gj02.js";import{_ as Pa}from"./AppAutocomplete-gSet5bhh.js";import{_ as ha}from"./AppTextField-CZ-FweSB.js";import{u as xa}from"./useApi-ScxAlKQS.js";import{e as Y,f as Ia,g as Sa,h as Da,c as Ra,V as Q}from"./VTable-CutsmQRh.js";import{$ as J}from"./api-DxCpfplE.js";import{V as K,a as U,b as w}from"./VCard-DTa3wz9r.js";import{V as F}from"./VDivider-tB53-x8g.js";import{V as L}from"./VCardText-DPg7EUjd.js";import{V as T,a as d}from"./VRow-DZO6nhTb.js";import{a as aa,m as Ca,V as Na}from"./VTextField-CkFq4NoZ.js";import"./VDialog-ux86SObM.js";import"./forwardRefs-B0Xpkwqa.js";import"./VImg-DIIpdOqD.js";import"./VList-DwaKb6s1.js";import"./VAvatar-cPbOgEwG.js";import"./VMenu-DXNTnmV5.js";import"./VChip-PV2jVkCI.js";import"./index-CvOPxmL5.js";/* empty css              */const Ka=la({...Ia({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),ea=ta()({name:"VRadio",props:Ka(),setup(i,S){let{slots:P}=S;return sa(()=>{const g=Y.filterProps(i);return e(Y,E(g,{class:["v-radio",i.class],style:i.style,type:"radio"}),P)}),{}}}),qa=la({height:{type:[Number,String],default:"auto"},...Ca(),...ca(Sa(),["multiple"]),trueIcon:{type:Z,default:"$radioOn"},falseIcon:{type:Z,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Aa=ta()({name:"VRadioGroup",inheritAttrs:!1,props:qa(),emits:{"update:modelValue":i=>!0},setup(i,S){let{attrs:P,slots:g}=S;const B=fa(),h=pa(()=>i.id||`radio-group-${B}`),D=ga(i,"modelValue");return sa(()=>{const[y,k]=ka(P),p=aa.filterProps(i),r=Y.filterProps(i),c=g.label?g.label({label:i.label,props:{for:h.value}}):i.label;return e(aa,E({class:["v-radio-group",i.class],style:i.style},y,p,{modelValue:D.value,"onUpdate:modelValue":j=>D.value=j,id:h.value}),{...g,default:j=>{let{id:b,messagesId:M,isDisabled:O,isReadonly:q}=j;return e(I,null,[c&&e(Na,{id:b.value},{default:()=>[c]}),e(Da,E(r,{id:b.value,"aria-describedby":M.value,defaultsTarget:"VRadio",trueIcon:i.trueIcon,falseIcon:i.falseIcon,type:i.type,disabled:O.value,readonly:q.value,"aria-labelledby":c?b.value:void 0,multiple:!1},k,{modelValue:D.value,"onUpdate:modelValue":u=>D.value=u}),g)])}})}),{}}}),$a={key:0,class:"ms-3"},Ua={class:"clamp-text text-white mb-0"},wa={class:"text-center"},Fa={class:"text-center"},La={class:"text-center"},Ba={class:"text-center"},Ma={key:1},re={__name:"ptk",setup(i){const S={dateFormat:"Y-m-d",locale:_a.Indonesian,altFormat:"j F Y",altInput:!0};ba(async()=>{await B()});const P=_(!1),g=_(),B=async()=>{var n,a;P.value=!0;try{let R=(await xa(Ra("/cek-sekolah"))).data.value;g.value=R.sekolah,u.value.sekolah_id=(n=R.sekolah)==null?void 0:n.sekolah_id,u.value.tahun_ajaran_id=(a=R.semester)==null?void 0:a.tahun_ajaran_id,b.value.jenis_ptk=R.jenis_ptk}catch(x){console.error(x)}finally{P.value=!1}},h=_(!1),D=async n=>{h.value=!0,await J("/get-jabatan",{method:"POST",body:{jenis_ptk_id:n},async onResponse({response:a}){let x=a._data;h.value=!1,u.value.jabatan_ptk_id=null,b.value.jabatan_ptk=x}})},y=_(),k=_({nik:void 0,tahun_ajaran_id:void 0,ptk_terdaftar_id:void 0,sekolah_id:void 0,jenis_ptk_id:void 0,jabatan_ptk_id:void 0,nomor_surat_tugas:void 0,tanggal_surat_tugas:void 0,tmt_tugas:void 0,ptk_induk:void 0}),p=_(!1),r=_(),c=_(),j=_(!1),b=_({jenis_ptk:[],jabatan_ptk:[]}),M=async()=>{k.value.nik=void 0,r.value=void 0,c.value=void 0,j.value=!1,y.value?(p.value=!0,await J("/cari-data",{method:"POST",body:{data:"guru",nik:y.value,sekolah_id:u.value.sekolah_id},async onResponse({response:n}){let a=n._data;j.value=!0,r.value=a.result,c.value=a.ptk,u.value.ptk=r.value,p.value=!1}})):k.value.nik="NIK tidak boleh kosong"},O=n=>{var a={1:"Lulus",2:"Mutasi",3:"Dikeluarkan",4:"Mengundurkan diri",5:"Putus Sekolah",6:"Wafat",7:"Hilang",8:"Alih Fungsi",9:"Pensiun",Z:"Lainnya"};if(n)return a[n]},q=_(),u=_({data:"guru",tahun_ajaran_id:null,ptk_terdaftar_id:null,sekolah_id:null,jenis_ptk_id:null,jabatan_ptk_id:null,nomor_surat_tugas:null,tanggal_surat_tugas:null,tmt_tugas:null,ptk_induk:null,ptk:null}),na=()=>{var n;(n=q.value)==null||n.validate().then(({valid:a})=>{a&&ua()})},A=_(!1),$=_({color:"",title:"",text:""}),ua=async()=>{p.value=!0,console.log("submit"),await J("/daftar",{method:"POST",body:u.value,async onResponse({response:n}){let a=n._data;p.value=!1,A.value=!0,$.value=a}})},oa=async()=>{u.value.ptk_terdaftar_id=null,u.value.jenis_ptk_id=null,u.value.jabatan_ptk_id=null,u.value.nomor_surat_tugas=null,u.value.tanggal_surat_tugas=null,u.value.tmt_tugas=null,u.value.ptk_induk=null,c.value=null,y.value=void 0,k.value={nik:void 0,tahun_ajaran_id:void 0,ptk_terdaftar_id:void 0,sekolah_id:void 0,jenis_ptk_id:void 0,jabatan_ptk_id:void 0,nomor_surat_tugas:void 0,tanggal_surat_tugas:void 0,tmt_tugas:void 0,ptk_induk:void 0},r.value=void 0,c.value=void 0,j.value=!1,b.value.jabatan_ptk=[]};return(n,a)=>{const x=ha,R=Va("RouterLink"),z=Pa,H=ma,da=ia;return m(),V(I,null,[l(P)?(m(),N(K,{key:0,class:"text-center"},{default:t(()=>[e(va,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):(m(),V(I,{key:1},[l(g)?(m(),N(K,{key:0},{default:t(()=>[e(U,{class:"pb-4"},{default:t(()=>[e(w,null,{default:t(()=>a[8]||(a[8]=[v("Tarik PTK")])),_:1,__:[8]})]),_:1}),e(F),e(L,null,{default:t(()=>[e(x,{modelValue:l(y),"onUpdate:modelValue":a[0]||(a[0]=o=>W(y)?y.value=o:null),required:"",clearable:"",placeholder:"Masukkan NIK",type:"text",rules:["requiredValidator"in n?n.requiredValidator:l(C)],"error-messages":l(k).nik},{append:t(()=>[e(X,{icon:n.$vuetify.display.smAndDown,onClick:M,disabled:l(p),loading:l(p)},{default:t(()=>[e(ya,{icon:"tabler-search",color:"#fff",size:"22"}),n.$vuetify.display.mdAndUp?(m(),V("span",$a,"Cari...")):G("",!0)]),_:1},8,["icon","disabled","loading"])]),_:1},8,["modelValue","rules","error-messages"])]),_:1})]),_:1})):(m(),N(K,{key:1,color:"#007BB6"},{default:t(()=>[e(L,null,{default:t(()=>[s("p",Ua,[a[10]||(a[10]=v(" Data Sekolah tidak ditemukan. Silahkan Simpan Data Sekolah terlebih dahulu ")),e(R,{class:"text-success ms-1",to:{name:"root"}},{default:t(()=>a[9]||(a[9]=[v(" disini ")])),_:1,__:[9]})])]),_:1})]),_:1})),l(j)?(m(),V(I,{key:2},[e(K,{class:"mt-4"},{default:t(()=>[e(U,{class:"pb-4"},{default:t(()=>[e(w,null,{default:t(()=>a[11]||(a[11]=[v("Hasil Pencarian")])),_:1,__:[11]})]),_:1}),e(F),l(r)?(m(),N(Q,{key:0},{default:t(()=>[s("tbody",null,[s("tr",null,[a[12]||(a[12]=s("td",null,"Nama",-1)),s("td",null,f(l(r).nama),1)]),s("tr",null,[a[13]||(a[13]=s("td",null,"NIK",-1)),s("td",null,f(l(r).nik),1)]),s("tr",null,[a[14]||(a[14]=s("td",null,"NUPTK",-1)),s("td",null,f(l(r).nuptk),1)]),s("tr",null,[a[15]||(a[15]=s("td",null,"Email",-1)),s("td",null,f(l(r).email),1)]),s("tr",null,[a[16]||(a[16]=s("td",null,"Tempat, Tanggal Lahir",-1)),s("td",null,f(l(r).tempat_lahir)+", "+f(l(r).tanggal_lahir),1)]),s("tr",null,[a[17]||(a[17]=s("td",null,"Nama Ibu Kandung",-1)),s("td",null,f(l(r).nama_ibu_kandung),1)])])]),_:1})):(m(),N(L,{key:1},{default:t(()=>a[18]||(a[18]=[v(" NIK tidak ditemukan! ")])),_:1,__:[18]}))]),_:1}),l(r)?(m(),V(I,{key:0},[e(K,{class:"mt-4"},{default:t(()=>[e(U,{class:"pb-4"},{default:t(()=>[e(w,null,{default:t(()=>a[19]||(a[19]=[v("Riwayat PTK Terdaftar")])),_:1,__:[19]})]),_:1}),e(F),e(Q,null,{default:t(()=>[a[21]||(a[21]=s("thead",null,[s("tr",null,[s("th",{class:"text-center"},"Nama Sekolah"),s("th",{class:"text-center"},"NPSN"),s("th",{class:"text-center"},"Tahun"),s("th",{class:"text-center"},"Jenis Keluar"),s("th",{class:"text-center"},"Tanggal Keluar")])],-1)),s("tbody",null,[l(r).terdaftar.length?(m(!0),V(I,{key:0},ja(l(r).terdaftar,o=>(m(),V("tr",{key:o.ptk_terdaftar_id},[s("td",null,f(o.sekolah.nama),1),s("td",wa,f(o.sekolah.npsn),1),s("td",Fa,f(o.tahun_ajaran_id),1),s("td",La,f(O(o.jenis_keluar_id)),1),s("td",Ba,f(o.tgl_ptk_keluar),1)]))),128)):(m(),V("tr",Ma,a[20]||(a[20]=[s("td",{class:"text-center",colspan:"5"}," Tidak ada data untuk ditampilkan ",-1)])))])]),_:1,__:[21]})]),_:1}),e(K,{class:"mt-4"},{default:t(()=>[e(U,{class:"pb-4"},{default:t(()=>[e(w,null,{default:t(()=>a[22]||(a[22]=[v("Registrasi PTK")])),_:1,__:[22]})]),_:1}),e(F),e(L,null,{default:t(()=>[l(c)?(m(),V(I,{key:0},[v(" PTK Telah Terdaftar ")],64)):(m(),N(ra,{key:1,ref_key:"refVForm",ref:q,onSubmit:Ta(na,["prevent"])},{default:t(()=>[e(T,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(T,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[23]||(a[23]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"jenis_ptk_id"},"Jenis PTK ",-1)])),_:1,__:[23]}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(z,{id:"jenis_ptk_id",modelValue:l(u).jenis_ptk_id,"onUpdate:modelValue":[a[1]||(a[1]=o=>l(u).jenis_ptk_id=o),D],items:l(b).jenis_ptk,placeholder:"== Pilih Jenis PTK ==","item-title":"jenis_ptk","item-value":"jenis_ptk_id",rules:["requiredValidator"in n?n.requiredValidator:l(C)],"error-messages":l(k).jenis_ptk_id},null,8,["modelValue","items","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(T,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[24]||(a[24]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"jabatan_ptk_id"},"Jabatan PTK",-1)])),_:1,__:[24]}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(z,{id:"jabatan_ptk_id",modelValue:l(u).jabatan_ptk_id,"onUpdate:modelValue":a[2]||(a[2]=o=>l(u).jabatan_ptk_id=o),items:l(b).jabatan_ptk,placeholder:"== Pilih Jabatan PTK ==","item-title":"jabatan_ptk","item-value":"jabatan_ptk_id",disabled:l(h),loading:l(h),rules:["requiredValidator"in n?n.requiredValidator:l(C)],"error-messages":l(k).jabatan_ptk_id},null,8,["modelValue","items","disabled","loading","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(T,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[25]||(a[25]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"nomor_surat_tugas"},"Nomor Surat Tugas",-1)])),_:1,__:[25]}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(x,{id:"nomor_surat_tugas",modelValue:l(u).nomor_surat_tugas,"onUpdate:modelValue":a[3]||(a[3]=o=>l(u).nomor_surat_tugas=o),placeholder:"Nomor Surat Tugas","persistent-placeholder":"",rules:["requiredValidator"in n?n.requiredValidator:l(C)],"error-messages":l(k).nomor_surat_tugas},null,8,["modelValue","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(T,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[26]||(a[26]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_surat_tugas"},"Tanggal Surat Tugas ",-1)])),_:1,__:[26]}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(H,{id:"tanggal_surat_tugas",modelValue:l(u).tanggal_surat_tugas,"onUpdate:modelValue":a[4]||(a[4]=o=>l(u).tanggal_surat_tugas=o),rules:["requiredValidator"in n?n.requiredValidator:l(C)],placeholder:"== Pilih Tanggal ==",config:S},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(T,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[27]||(a[27]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"tmt_tugas"},"TMT Tugas ",-1)])),_:1,__:[27]}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(H,{id:"tmt_tugas",modelValue:l(u).tmt_tugas,"onUpdate:modelValue":a[5]||(a[5]=o=>l(u).tmt_tugas=o),rules:["requiredValidator"in n?n.requiredValidator:l(C)],placeholder:"== Pilih Tanggal ==",config:S},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(T,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[28]||(a[28]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"nomor_surat_tugas"},"PTK Induk",-1)])),_:1,__:[28]}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(Aa,{modelValue:l(u).ptk_induk,"onUpdate:modelValue":a[6]||(a[6]=o=>l(u).ptk_induk=o)},{default:t(()=>[e(ea,{label:"Ya",value:1}),e(ea,{label:"Tidak",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(T,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3"}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(X,{type:"submit",class:"me-4",disabled:l(p),loading:l(p)},{default:t(()=>a[29]||(a[29]=[v(" Simpan ")])),_:1,__:[29]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512))]),_:1})]),_:1})],64)):G("",!0)],64)):G("",!0)],64)),e(da,{isDialogVisible:l(A),"onUpdate:isDialogVisible":a[7]||(a[7]=o=>W(A)?A.value=o:null),"confirm-color":l($).color,"confirm-title":l($).title,"confirm-msg":l($).text,onConfirm:oa},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])],64)}}};export{re as default};

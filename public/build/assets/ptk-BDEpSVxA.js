import{_ as ra,r as N,V as ma,a as _a,i as fa}from"./VForm-BaXi_tzB.js";import{a5 as la,a6 as sa,a9 as na,b as e,p as W,a8 as pa,X as ka,a7 as ga,bj as ca,an as Z,aa as ba,F as S,E as Va,r as _,c as v,f as T,l,e as t,k as J,a2 as X,a as va,o as m,ay as ya,s as p,a0 as Q,Z as ja,d as s,t as f,h as Ta,$ as Pa}from"./main-BBeR6XVV.js";import{_ as ha}from"./AppAutocomplete-WW741ojG.js";import{_ as xa}from"./AppTextField-B4jbp4LJ.js";import{u as Ia}from"./useApi-CPOtDUZ3.js";import{e as Y,f as Da,g as Sa,h as Ra,c as Na,V as aa}from"./VTable-DgoB2Tvy.js";import{$ as E}from"./api-dBY3XVoR.js";import{V as C,a as w,b as F}from"./VCard-CR52vXdf.js";import{V as L}from"./VDivider-BMJX0LFQ.js";import{V as B}from"./VCardText-C64EnDVd.js";import{V as Ca}from"./VAlert-B6DZWnSO.js";import{V as P,a as i}from"./VRow-DCkiN6iK.js";import{a as ea,m as Ka,V as Aa}from"./VTextField-BphGpWbK.js";import"./VDialog-CEggmTKD.js";import"./forwardRefs-A04Mi118.js";import"./VImg-Dluj_JUu.js";import"./VList-Cax3Dcs5.js";import"./VAvatar-uTJpscJT.js";import"./VMenu-DS0P4sCM.js";import"./VChip-DjWddHzB.js";import"./index-CvOPxmL5.js";/* empty css              */const qa=sa({...Da({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),ta=la()({name:"VRadio",props:qa(),setup(r,R){let{slots:h}=R;return na(()=>{const g=Y.filterProps(r);return e(Y,W(g,{class:["v-radio",r.class],style:r.style,type:"radio"}),h)}),{}}}),Ua=sa({height:{type:[Number,String],default:"auto"},...Ka(),...ba(Sa(),["multiple"]),trueIcon:{type:Z,default:"$radioOn"},falseIcon:{type:Z,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),$a=la()({name:"VRadioGroup",inheritAttrs:!1,props:Ua(),emits:{"update:modelValue":r=>!0},setup(r,R){let{attrs:h,slots:g}=R;const K=pa(),A=ka(()=>r.id||`radio-group-${K}`),c=ga(r,"modelValue");return na(()=>{const[M,y]=ca(h),b=ea.filterProps(r),k=Y.filterProps(r),d=g.label?g.label({label:r.label,props:{for:A.value}}):r.label;return e(ea,W({class:["v-radio-group",r.class],style:r.style},M,b,{modelValue:c.value,"onUpdate:modelValue":V=>c.value=V,id:A.value}),{...g,default:V=>{let{id:j,messagesId:x,isDisabled:O,isReadonly:G}=V;return e(S,null,[d&&e(Aa,{id:j.value},{default:()=>[d]}),e(Ra,W(k,{id:j.value,"aria-describedby":x.value,defaultsTarget:"VRadio",trueIcon:r.trueIcon,falseIcon:r.falseIcon,type:r.type,disabled:O.value,readonly:G.value,"aria-labelledby":d?j.value:void 0,multiple:!1},y,{modelValue:c.value,"onUpdate:modelValue":q=>c.value=q}),g)])}})}),{}}}),wa={key:0,class:"ms-3"},Fa={class:"clamp-text text-white mb-0"},La={class:"text-center"},Ba={class:"text-center"},Ma={class:"text-center"},Oa={class:"text-center"},Ga={key:1},fe={__name:"ptk",setup(r){const R={dateFormat:"Y-m-d",locale:fa.Indonesian,altFormat:"j F Y",altInput:!0};Va(async()=>{await A()});const h=_(!1),g=_(),K=_(!0),A=async()=>{var n,a;h.value=!0;try{let D=(await Ia(Na("/cek-sekolah"))).data.value;g.value=D.sekolah,o.value.sekolah_id=(n=D.sekolah)==null?void 0:n.sekolah_id,o.value.tahun_ajaran_id=(a=D.semester)==null?void 0:a.tahun_ajaran_id,x.value.jenis_ptk=D.jenis_ptk,K.value=D.jam_sinkron}catch(I){console.error(I)}finally{h.value=!1}},c=_(!1),M=async n=>{c.value=!0,await E("/get-jabatan",{method:"POST",body:{jenis_ptk_id:n},async onResponse({response:a}){let I=a._data;c.value=!1,o.value.jabatan_ptk_id=null,x.value.jabatan_ptk=I}})},y=_(),b=_({nik:void 0,tahun_ajaran_id:void 0,ptk_terdaftar_id:void 0,sekolah_id:void 0,jenis_ptk_id:void 0,jabatan_ptk_id:void 0,nomor_surat_tugas:void 0,tanggal_surat_tugas:void 0,tmt_tugas:void 0,ptk_induk:void 0}),k=_(!1),d=_(),V=_(),j=_(!1),x=_({jenis_ptk:[],jabatan_ptk:[]}),O=async()=>{b.value.nik=void 0,d.value=void 0,V.value=void 0,j.value=!1,y.value?(k.value=!0,await E("/cari-data",{method:"POST",body:{data:"guru",nik:y.value,sekolah_id:o.value.sekolah_id},async onResponse({response:n}){let a=n._data;j.value=!0,d.value=a.result,V.value=a.ptk,o.value.ptk=d.value,k.value=!1}})):b.value.nik="NIK tidak boleh kosong"},G=n=>{var a={1:"Lulus",2:"Mutasi",3:"Dikeluarkan",4:"Mengundurkan diri",5:"Putus Sekolah",6:"Wafat",7:"Hilang",8:"Alih Fungsi",9:"Pensiun",Z:"Lainnya"};if(n)return a[n]},q=_(),o=_({data:"guru",tahun_ajaran_id:null,ptk_terdaftar_id:null,sekolah_id:null,jenis_ptk_id:null,jabatan_ptk_id:null,nomor_surat_tugas:null,tanggal_surat_tugas:null,tmt_tugas:null,ptk_induk:null,ptk:null}),oa=()=>{var n;(n=q.value)==null||n.validate().then(({valid:a})=>{a&&ua()})},U=_(!1),$=_({color:"",title:"",text:""}),ua=async()=>{k.value=!0,console.log("submit"),await E("/daftar",{method:"POST",body:o.value,async onResponse({response:n}){let a=n._data;k.value=!1,U.value=!0,$.value=a}})},ia=async()=>{o.value.ptk_terdaftar_id=null,o.value.jenis_ptk_id=null,o.value.jabatan_ptk_id=null,o.value.nomor_surat_tugas=null,o.value.tanggal_surat_tugas=null,o.value.tmt_tugas=null,o.value.ptk_induk=null,V.value=null,y.value=void 0,b.value={nik:void 0,tahun_ajaran_id:void 0,ptk_terdaftar_id:void 0,sekolah_id:void 0,jenis_ptk_id:void 0,jabatan_ptk_id:void 0,nomor_surat_tugas:void 0,tanggal_surat_tugas:void 0,tmt_tugas:void 0,ptk_induk:void 0},d.value=void 0,V.value=void 0,j.value=!1,x.value.jabatan_ptk=[]};return(n,a)=>{const I=xa,D=va("RouterLink"),z=ha,H=_a,da=ra;return m(),v(S,null,[l(h)?(m(),T(C,{key:0,class:"text-center"},{default:t(()=>[e(ya,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):(m(),v(S,{key:1},[l(g)?(m(),T(C,{key:0},{default:t(()=>[e(w,{class:"pb-4"},{default:t(()=>[e(F,null,{default:t(()=>a[8]||(a[8]=[p("Tarik PTK")])),_:1,__:[8]})]),_:1}),e(L),e(B,null,{default:t(()=>[l(K)?(m(),T(I,{key:0,modelValue:l(y),"onUpdate:modelValue":a[0]||(a[0]=u=>X(y)?y.value=u:null),required:"",clearable:"",placeholder:"Masukkan NIK",type:"text",rules:["requiredValidator"in n?n.requiredValidator:l(N)],"error-messages":l(b).nik},{append:t(()=>[e(Q,{icon:n.$vuetify.display.smAndDown,onClick:O,disabled:l(k),loading:l(k)},{default:t(()=>[e(ja,{icon:"tabler-search",color:"#fff",size:"22"}),n.$vuetify.display.mdAndUp?(m(),v("span",wa,"Cari...")):J("",!0)]),_:1},8,["icon","disabled","loading"])]),_:1},8,["modelValue","rules","error-messages"])):(m(),T(Ca,{key:1,color:"error",class:"text-center",variant:"tonal"},{default:t(()=>a[9]||(a[9]=[s("h2",{class:"mt-4 mb-4"},"Penyesuaian Waktu Layanan Tarik Data Dapodik",-1),s("p",null,[p(" Dikarenakan adanya proses rutin sinkronisasi data Dapodik di Server PUSDATIN, "),s("br"),p("maka layanan sinkronisasi hanya dapat diakses antara pukul "),s("span",{class:"text-danger"},[s("b",null,"03.00 s/d 24.00 (WIB)")])],-1)])),_:1,__:[9]}))]),_:1})]),_:1})):(m(),T(C,{key:1,color:"#007BB6"},{default:t(()=>[e(B,null,{default:t(()=>[s("p",Fa,[a[11]||(a[11]=p(" Data Sekolah tidak ditemukan. Silahkan Simpan Data Sekolah terlebih dahulu ")),e(D,{class:"text-success ms-1",to:{name:"root"}},{default:t(()=>a[10]||(a[10]=[p(" disini ")])),_:1,__:[10]})])]),_:1})]),_:1})),l(j)?(m(),v(S,{key:2},[e(C,{class:"mt-4"},{default:t(()=>[e(w,{class:"pb-4"},{default:t(()=>[e(F,null,{default:t(()=>a[12]||(a[12]=[p("Hasil Pencarian")])),_:1,__:[12]})]),_:1}),e(L),l(d)?(m(),T(aa,{key:0},{default:t(()=>[s("tbody",null,[s("tr",null,[a[13]||(a[13]=s("td",null,"Nama",-1)),s("td",null,f(l(d).nama),1)]),s("tr",null,[a[14]||(a[14]=s("td",null,"NIK",-1)),s("td",null,f(l(d).nik),1)]),s("tr",null,[a[15]||(a[15]=s("td",null,"NUPTK",-1)),s("td",null,f(l(d).nuptk),1)]),s("tr",null,[a[16]||(a[16]=s("td",null,"Email",-1)),s("td",null,f(l(d).email),1)]),s("tr",null,[a[17]||(a[17]=s("td",null,"Tempat, Tanggal Lahir",-1)),s("td",null,f(l(d).tempat_lahir)+", "+f(l(d).tanggal_lahir),1)]),s("tr",null,[a[18]||(a[18]=s("td",null,"Nama Ibu Kandung",-1)),s("td",null,f(l(d).nama_ibu_kandung),1)])])]),_:1})):(m(),T(B,{key:1},{default:t(()=>a[19]||(a[19]=[p(" NIK tidak ditemukan! ")])),_:1,__:[19]}))]),_:1}),l(d)?(m(),v(S,{key:0},[e(C,{class:"mt-4"},{default:t(()=>[e(w,{class:"pb-4"},{default:t(()=>[e(F,null,{default:t(()=>a[20]||(a[20]=[p("Riwayat PTK Terdaftar")])),_:1,__:[20]})]),_:1}),e(L),e(aa,null,{default:t(()=>[a[22]||(a[22]=s("thead",null,[s("tr",null,[s("th",{class:"text-center"},"Nama Sekolah"),s("th",{class:"text-center"},"NPSN"),s("th",{class:"text-center"},"Tahun"),s("th",{class:"text-center"},"Jenis Keluar"),s("th",{class:"text-center"},"Tanggal Keluar")])],-1)),s("tbody",null,[l(d).terdaftar.length?(m(!0),v(S,{key:0},Ta(l(d).terdaftar,u=>(m(),v("tr",{key:u.ptk_terdaftar_id},[s("td",null,f(u.sekolah.nama),1),s("td",La,f(u.sekolah.npsn),1),s("td",Ba,f(u.tahun_ajaran_id),1),s("td",Ma,f(G(u.jenis_keluar_id)),1),s("td",Oa,f(u.tgl_ptk_keluar),1)]))),128)):(m(),v("tr",Ga,a[21]||(a[21]=[s("td",{class:"text-center",colspan:"5"}," Tidak ada data untuk ditampilkan ",-1)])))])]),_:1,__:[22]})]),_:1}),e(C,{class:"mt-4"},{default:t(()=>[e(w,{class:"pb-4"},{default:t(()=>[e(F,null,{default:t(()=>a[23]||(a[23]=[p("Registrasi PTK")])),_:1,__:[23]})]),_:1}),e(L),e(B,null,{default:t(()=>[l(V)?(m(),v(S,{key:0},[p(" PTK Telah Terdaftar ")],64)):(m(),T(ma,{key:1,ref_key:"refVForm",ref:q,onSubmit:Pa(oa,["prevent"])},{default:t(()=>[e(P,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[24]||(a[24]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"jenis_ptk_id"},"Jenis PTK ",-1)])),_:1,__:[24]}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(z,{id:"jenis_ptk_id",modelValue:l(o).jenis_ptk_id,"onUpdate:modelValue":[a[1]||(a[1]=u=>l(o).jenis_ptk_id=u),M],items:l(x).jenis_ptk,placeholder:"== Pilih Jenis PTK ==","item-title":"jenis_ptk","item-value":"jenis_ptk_id",rules:["requiredValidator"in n?n.requiredValidator:l(N)],"error-messages":l(b).jenis_ptk_id},null,8,["modelValue","items","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[25]||(a[25]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"jabatan_ptk_id"},"Jabatan PTK",-1)])),_:1,__:[25]}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(z,{id:"jabatan_ptk_id",modelValue:l(o).jabatan_ptk_id,"onUpdate:modelValue":a[2]||(a[2]=u=>l(o).jabatan_ptk_id=u),items:l(x).jabatan_ptk,placeholder:"== Pilih Jabatan PTK ==","item-title":"jabatan_ptk","item-value":"jabatan_ptk_id",disabled:l(c),loading:l(c),rules:["requiredValidator"in n?n.requiredValidator:l(N)],"error-messages":l(b).jabatan_ptk_id},null,8,["modelValue","items","disabled","loading","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[26]||(a[26]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"nomor_surat_tugas"},"Nomor Surat Tugas",-1)])),_:1,__:[26]}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(I,{id:"nomor_surat_tugas",modelValue:l(o).nomor_surat_tugas,"onUpdate:modelValue":a[3]||(a[3]=u=>l(o).nomor_surat_tugas=u),placeholder:"Nomor Surat Tugas","persistent-placeholder":"",rules:["requiredValidator"in n?n.requiredValidator:l(N)],"error-messages":l(b).nomor_surat_tugas},null,8,["modelValue","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[27]||(a[27]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_surat_tugas"},"Tanggal Surat Tugas ",-1)])),_:1,__:[27]}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(H,{id:"tanggal_surat_tugas",modelValue:l(o).tanggal_surat_tugas,"onUpdate:modelValue":a[4]||(a[4]=u=>l(o).tanggal_surat_tugas=u),rules:["requiredValidator"in n?n.requiredValidator:l(N)],placeholder:"== Pilih Tanggal ==",config:R},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[28]||(a[28]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"tmt_tugas"},"TMT Tugas ",-1)])),_:1,__:[28]}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(H,{id:"tmt_tugas",modelValue:l(o).tmt_tugas,"onUpdate:modelValue":a[5]||(a[5]=u=>l(o).tmt_tugas=u),rules:["requiredValidator"in n?n.requiredValidator:l(N)],placeholder:"== Pilih Tanggal ==",config:R},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[29]||(a[29]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"nomor_surat_tugas"},"PTK Induk",-1)])),_:1,__:[29]}),e(i,{cols:"12",md:"9"},{default:t(()=>[e($a,{modelValue:l(o).ptk_induk,"onUpdate:modelValue":a[6]||(a[6]=u=>l(o).ptk_induk=u)},{default:t(()=>[e(ta,{label:"Ya",value:1}),e(ta,{label:"Tidak",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3"}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(Q,{type:"submit",class:"me-4",disabled:l(k),loading:l(k)},{default:t(()=>a[30]||(a[30]=[p(" Simpan ")])),_:1,__:[30]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512))]),_:1})]),_:1})],64)):J("",!0)],64)):J("",!0)],64)),e(da,{isDialogVisible:l(U),"onUpdate:isDialogVisible":a[7]||(a[7]=u=>X(U)?U.value=u:null),"confirm-color":l($).color,"confirm-title":l($).title,"confirm-msg":l($).text,onConfirm:ia},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])],64)}}};export{fe as default};

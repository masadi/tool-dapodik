import{a as E,f as m,o as i,e,b as t,Z as B,r as p,E as F,c as N,l,F as H,s as o,d as n,a0 as c,au as M,t as D,k as T,a2 as z}from"./main-n32_axEH.js";import{_ as j}from"./AppAutocomplete-DrS7CLSy.js";import{$ as G}from"./api-DoXr9yd5.js";import{u as $,b as J,a as K}from"./useApi-CeEQgDFX.js";import{c as w,V as L}from"./VTable-CUg5xSoq.js";import{V,a as C,b as A}from"./VCard-C9ZNiveR.js";import{V as _}from"./VCardText-C0jduQX_.js";import{V as O}from"./VAlert-Dua21wOL.js";import{V as Y}from"./VDialog-CFzkNjZv.js";import"./VTextField-D2TANl23.js";import"./VImg-BqMy6pNe.js";import"./forwardRefs-C5SyJSyF.js";import"./VList-D3CSKZs5.js";import"./VAvatar-Bwvnssy2.js";import"./VDivider-D2jSEott.js";import"./VMenu-vB0A2suz.js";import"./VChip-CLaoXrUg.js";import"./index-CvOPxmL5.js";const Z={__name:"DialogCloseBtn",props:{icon:{type:String,required:!1,default:"tabler-x"},iconSize:{type:String,required:!1,default:"20"}},setup(S){const r=S;return(d,g)=>{const y=E("IconBtn");return i(),m(y,{variant:"elevated",size:"30",ripple:!1,class:"v-dialog-close-btn"},{default:e(()=>[t(B,{icon:r.icon,size:r.iconSize},null,8,["icon","size"])]),_:1})}}},Q={key:0,class:"ms-3"},ca={__name:"index",setup(S){const r=p(),d=p(),g=p([]),y=p(!0),x=p(!1),I=async()=>{await G("/sekolah",{method:"POST",body:{sekolah_id:r.value},async onResponse({response:u}){let a=u._data;y.value=a.allowed,await b()}})};F(async()=>{await b()});const v=p(!1),b=async()=>{var u;v.value=!0;try{let f=(await $(w("/sekolah"))).data.value;g.value=f.sekolah,d.value=(u=f.user)==null?void 0:u.sekolah,x.value=f.error}catch(a){console.error(a)}finally{v.value=!1}},s=p(!1),P=()=>{s.value=!0},R=async()=>{s.value=!1,await $(w("/reset")),K()},U=async()=>{console.log("connectToDapo"),await J(w("normalkan")),await b()};return(u,a)=>{const f=j,q=Z;return i(),N(H,null,[t(V,{color:"#007BB6"},{default:e(()=>[t(C,null,{prepend:e(()=>[t(B,{size:"1.9rem",color:"white",icon:"tabler-database"})]),default:e(()=>[t(A,{class:"text-white"},{default:e(()=>a[4]||(a[4]=[o(" Tool Dapodik ")])),_:1,__:[4]})]),_:1}),t(_,null,{default:e(()=>a[5]||(a[5]=[n("p",{class:"clamp-text text-white mb-0"},"Harap Gunakan dengan BIJAK!",-1)])),_:1,__:[5]})]),_:1}),l(x)?(i(),m(V,{key:0,class:"mt-4"},{default:e(()=>[t(A,null,{default:e(()=>a[6]||(a[6]=[o(" Aplikasi tidak terhubung ke Database Dapodik! ")])),_:1,__:[6]}),t(C,null,{default:e(()=>[t(c,{block:"",size:"large",onClick:U},{default:e(()=>a[7]||(a[7]=[o("Hubungkan Aplikasi ke Database Dapodik")])),_:1,__:[7]})]),_:1})]),_:1})):(i(),m(V,{key:1,class:"mt-4"},{default:e(()=>[t(C,null,M({default:e(()=>[t(A,{class:"text-white"},{default:e(()=>[o(D(l(d)?"Data":"Registrasi")+" Sekolah ",1)]),_:1})]),_:2},[l(d)?{name:"append",fn:e(()=>[t(c,{color:"error",onClick:P},{default:e(()=>a[8]||(a[8]=[o("Reset")])),_:1,__:[8]})]),key:"0"}:void 0]),1024),l(d)?(i(),m(_,{key:0},{default:e(()=>[l(y)?T("",!0):(i(),m(O,{key:0,color:"error"},{default:e(()=>a[9]||(a[9]=[o(" NPSN tidak terdaftar! ")])),_:1,__:[9]})),t(L,null,{default:e(()=>[n("tbody",null,[n("tr",null,[a[10]||(a[10]=n("td",null,"Nama",-1)),n("td",null,D(l(d).nama),1)]),n("tr",null,[a[11]||(a[11]=n("td",null,"NPSN",-1)),n("td",null,D(l(d).npsn),1)])])]),_:1})]),_:1})):(i(),m(_,{key:1},{default:e(()=>[t(f,{modelValue:l(r),"onUpdate:modelValue":a[0]||(a[0]=k=>z(r)?r.value=k:null),items:l(g),"item-title":"nama","item-value":"sekolah_id",placeholder:"Pilih Sekolah",disabled:l(v),loading:l(v)},{append:e(()=>[t(c,{icon:u.$vuetify.display.smAndDown,onClick:I},{default:e(()=>[t(B,{icon:"tabler-device-floppy",color:"#fff",size:"22"}),u.$vuetify.display.mdAndUp?(i(),N("span",Q,"Simpan")):T("",!0)]),_:1},8,["icon"])]),_:1},8,["modelValue","items","disabled","loading"])]),_:1})),t(Y,{modelValue:l(s),"onUpdate:modelValue":a[3]||(a[3]=k=>z(s)?s.value=k:null),persistent:"",class:"v-dialog-sm"},{default:e(()=>[t(q,{onClick:a[1]||(a[1]=k=>s.value=!l(s))}),t(V,{title:"Apakah Anda yakin?"},{default:e(()=>[t(_,null,{default:e(()=>a[12]||(a[12]=[o(" Tindakan ini akan mengambalikan Aplikasi ke awal! ")])),_:1,__:[12]}),t(_,{class:"d-flex justify-end gap-3 flex-wrap"},{default:e(()=>[t(c,{color:"secondary",variant:"tonal",onClick:a[2]||(a[2]=k=>s.value=!1)},{default:e(()=>a[13]||(a[13]=[o(" Batal ")])),_:1,__:[13]}),t(c,{onClick:R},{default:e(()=>a[14]||(a[14]=[o(" Yakin ")])),_:1,__:[14]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))],64)}}};export{ca as default};

import{a as U,f as y,o as p,e as a,b as t,Z as w,r as u,E as q,c as S,F as E,s as d,d as s,au as F,t as g,l,a0 as v,k as x,a2 as D}from"./main-D5YvgCjt.js";import{_ as M}from"./AppAutocomplete-DoZlIOra.js";import{$ as j}from"./api-YWKl5vSZ.js";import{u as A,a as G}from"./useApi-obuZURhq.js";import{c as N,V as H}from"./VTable-CYQqX1ac.js";import{V as b,a as $,b as z}from"./VCard-R3gxVz52.js";import{V as f}from"./VCardText-TAbZaq51.js";import{V as J}from"./VAlert-BttOifdY.js";import{V as K}from"./VDialog-ZVkaLbsc.js";import"./VTextField-FnbS8rHt.js";import"./VImg-cwMsIaom.js";import"./forwardRefs-CWJzJQtr.js";import"./VList-DkSMlIoX.js";import"./VAvatar-BOCiSy9V.js";import"./VDivider-CumrEmxb.js";import"./VMenu-DgYIRoKL.js";import"./VChip-BuoSjUEw.js";import"./index-CvOPxmL5.js";const L={__name:"DialogCloseBtn",props:{icon:{type:String,required:!1,default:"tabler-x"},iconSize:{type:String,required:!1,default:"20"}},setup(C){const n=C;return(i,V)=>{const c=U("IconBtn");return p(),y(c,{variant:"elevated",size:"30",ripple:!1,class:"v-dialog-close-btn"},{default:a(()=>[t(w,{icon:n.icon,size:n.iconSize},null,8,["icon","size"])]),_:1})}}},O={key:0,class:"ms-3"},me={__name:"index",setup(C){const n=u(),i=u(),V=u([]),c=u(!0),T=async()=>{await j("/sekolah",{method:"POST",body:{sekolah_id:n.value},async onResponse({response:r}){let e=r._data;c.value=e.allowed,await B()}})};q(async()=>{await B()});const k=u(!1),B=async()=>{var r;k.value=!0;try{let _=(await A(N("/sekolah"))).data.value;V.value=_.sekolah,i.value=(r=_.user)==null?void 0:r.sekolah}catch(e){console.error(e)}finally{k.value=!1}},o=u(!1),I=()=>{o.value=!0},P=async()=>{o.value=!1,await A(N("/reset")),G()};return(r,e)=>{const _=M,R=L;return p(),S(E,null,[t(b,{color:"#007BB6"},{default:a(()=>[t($,null,{prepend:a(()=>[t(w,{size:"1.9rem",color:"white",icon:"tabler-database"})]),default:a(()=>[t(z,{class:"text-white"},{default:a(()=>e[4]||(e[4]=[d(" Tool Dapodik ")])),_:1,__:[4]})]),_:1}),t(f,null,{default:a(()=>e[5]||(e[5]=[s("p",{class:"clamp-text text-white mb-0"},"Harap Gunakan dengan BIJAK!",-1)])),_:1,__:[5]})]),_:1}),t(b,{class:"mt-4"},{default:a(()=>[t($,null,F({default:a(()=>[t(z,{class:"text-white"},{default:a(()=>[d(g(l(i)?"Data":"Registrasi")+" Sekolah ",1)]),_:1})]),_:2},[l(i)?{name:"append",fn:a(()=>[t(v,{color:"error",onClick:I},{default:a(()=>e[6]||(e[6]=[d("Reset")])),_:1,__:[6]})]),key:"0"}:void 0]),1024),l(i)?(p(),y(f,{key:0},{default:a(()=>[l(c)?x("",!0):(p(),y(J,{key:0,color:"error"},{default:a(()=>e[7]||(e[7]=[d(" NPSN tidak terdaftar! ")])),_:1,__:[7]})),t(H,null,{default:a(()=>[s("tbody",null,[s("tr",null,[e[8]||(e[8]=s("td",null,"Nama",-1)),s("td",null,g(l(i).nama),1)]),s("tr",null,[e[9]||(e[9]=s("td",null,"NPSN",-1)),s("td",null,g(l(i).npsn),1)])])]),_:1})]),_:1})):(p(),y(f,{key:1},{default:a(()=>[t(_,{modelValue:l(n),"onUpdate:modelValue":e[0]||(e[0]=m=>D(n)?n.value=m:null),items:l(V),"item-title":"nama","item-value":"sekolah_id",placeholder:"Pilih Sekolah",disabled:l(k),loading:l(k)},{append:a(()=>[t(v,{icon:r.$vuetify.display.smAndDown,onClick:T},{default:a(()=>[t(w,{icon:"tabler-device-floppy",color:"#fff",size:"22"}),r.$vuetify.display.mdAndUp?(p(),S("span",O,"Simpan")):x("",!0)]),_:1},8,["icon"])]),_:1},8,["modelValue","items","disabled","loading"])]),_:1})),t(K,{modelValue:l(o),"onUpdate:modelValue":e[3]||(e[3]=m=>D(o)?o.value=m:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[t(R,{onClick:e[1]||(e[1]=m=>o.value=!l(o))}),t(b,{title:"Apakah Anda yakin?"},{default:a(()=>[t(f,null,{default:a(()=>e[10]||(e[10]=[d(" Tindakan ini akan mengambalikan Aplikasi ke awal! ")])),_:1,__:[10]}),t(f,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[t(v,{color:"secondary",variant:"tonal",onClick:e[2]||(e[2]=m=>o.value=!1)},{default:a(()=>e[11]||(e[11]=[d(" Batal ")])),_:1,__:[11]}),t(v,{onClick:P},{default:a(()=>e[12]||(e[12]=[d(" Yakin ")])),_:1,__:[12]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{me as default};

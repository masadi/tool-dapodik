import{_ as O,i as Y}from"./id-CouOqdkt.js";import{_ as M}from"./AppAutocomplete-Ce7Xv5nu.js";import{_ as G}from"./AppTextField-BvEaz0lZ.js";import{V as H,_ as W}from"./VSnackbar-0gybrv1g.js";import{u as I}from"./useApi-DyvcKpbi.js";import{c as K}from"./createUrl-KkOWSS81.js";import{$ as B}from"./api-DxSuTryf.js";import{V as U,a as X,b as Z}from"./VCard-MdzLNOx0.js";import{r as p,E as aa,w as A,f as T,c as ta,l as t,e as i,b as r,a2 as ea,F as la,a as na,o as v,ay as sa,s as g,d,a0 as ra,t as J,az as ia}from"./main-C8xu4-vM.js";import{V as $}from"./VDivider-CgZgS3oc.js";import{V as F}from"./VCardText-DAeSW8Wx.js";import{V as da}from"./VSpacer-hDN-M_sN.js";import{V as oa}from"./VDataTableServer-B7CPH5Qy.js";import"./VTextField-C54nE6Ao.js";import"./VImg-HiYQ4kB8.js";import"./forwardRefs-Dsi23SII.js";import"./VList-BOpeIbDM.js";import"./VAvatar-CEGz3YjL.js";import"./VMenu-BDEbuP5a.js";import"./VChip-DTz_HPEf.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VDataTable-63B7bGnf.js";import"./VTable-CBi0cRin.js";const _a={class:"d-flex gap-2 align-center"},pa={class:"d-flex align-center flex-wrap gap-4"},ua={class:"d-flex align-center gap-x-4"},ga={class:"d-flex flex-column"},ma={class:"text-base"},ka={class:"text-sm"},ca={class:"clamp-text text-white mb-0"},Ra={__name:"ptk",setup(fa){const b=p({locale:Y.Indonesian,altFormat:"j F Y",altInput:!0});aa(async()=>{await L()});const V=p(!1),y=p(),L=async()=>{V.value=!0;try{let l=(await I(K("/cek-sekolah"))).data.value;y.value=l.sekolah,y.value&&D()}catch(n){console.error(n)}finally{V.value=!1}},N=[{title:"Nama",key:"nama",sortable:!0,nowrap:!0},{title:"Status Kepegawaian",key:"status_kepegawaian_id"},{title:"sk pengangkatan",key:"sk_pengangkatan"},{title:"tmt pengangkatan",key:"tmt_pengangkatan"},{title:"lembaga pengangkat",key:"lembaga_pengangkat_id"},{title:"Jenis PTK",key:"jenis_ptk",sortable:!1},{title:"Jabatan PTK",key:"jabatan_ptk",sortable:!1},{title:"nomor surat tugas",key:"nomor_surat_tugas"},{title:"tanggal surat tugas",key:"tanggal_surat_tugas"},{title:"tmt tugas",key:"tmt_tugas"},{title:"Induk",key:"induk",align:"center",sortable:!1},{title:"aksi",key:"aksi",align:"center",sortable:!1}],_=p({page:1,itemsPerPage:10,searchQuery:"",selectedRole:null,sortby:"nama",sortbydesc:"ASC"}),h=p(!1),x=p([]),P=p(0),S=p([]),j=p([]),z=p([]),C=p([]),R=n=>{var l,s;_.value.sortby=(l=n[0])==null?void 0:l.key,_.value.sortbydesc=(s=n[0])==null?void 0:s.order},e=p({status_kepegawaian_id:{},lembaga_pengangkat_id:{},tmt_tugas:{},sk_pengangkatan:{},tmt_pengangkatan:{},jenis_ptk_id:{},jabatan_ptk_id:{},nomor_surat_tugas:{},tanggal_surat_tugas:{},tmt_tugas:{},ptk_induk:{}}),m=p(!1),D=async()=>{h.value=!0;try{let l=(await I(K("/guru",{query:{q:_.value.searchQuery,page:_.value.page,per_page:_.value.itemsPerPage,sortby:_.value.sortby,sortbydesc:_.value.sortbydesc}}))).data.value;x.value=l.data.data,P.value=l.data.total,S.value=l.jenis_ptk,z.value=l.status_kepegawaian,C.value=l.lembaga_pengangkat,x.value.forEach(s=>{j.value[s.ptk_terdaftar.ptk_terdaftar_id]=l.jabatan,e.value.status_kepegawaian_id[s.ptk_id]=parseInt(s.status_kepegawaian_id),e.value.sk_pengangkatan[s.ptk_id]=s.sk_pengangkatan,e.value.tmt_pengangkatan[s.ptk_id]=s.tmt_pengangkatan,e.value.lembaga_pengangkat_id[s.ptk_id]=parseInt(s.lembaga_pengangkat_id),e.value.jenis_ptk_id[s.ptk_terdaftar.ptk_terdaftar_id]=parseInt(s.ptk_terdaftar.jenis_ptk_id),e.value.jabatan_ptk_id[s.ptk_terdaftar.ptk_terdaftar_id]=parseInt(s.ptk_terdaftar.jabatan_ptk_id),e.value.nomor_surat_tugas[s.ptk_terdaftar.ptk_terdaftar_id]=s.ptk_terdaftar.nomor_surat_tugas,e.value.tanggal_surat_tugas[s.ptk_terdaftar.ptk_terdaftar_id]=s.ptk_terdaftar.tanggal_surat_tugas,e.value.tmt_tugas[s.ptk_terdaftar.ptk_terdaftar_id]=s.ptk_terdaftar.tmt_tugas,e.value.ptk_induk[s.ptk_terdaftar.ptk_terdaftar_id]=parseInt(s.ptk_terdaftar.ptk_induk)})}catch(n){console.error(n)}finally{h.value=!1}};A(_,ia(()=>{D()},500),{deep:!0}),A(()=>_.value.searchQuery,()=>{_.value.page=1});const k=p([]),E=async n=>{k.value[n.ptk_id]=!0,await B("/guru",{method:"POST",body:{ptk_id:n.ptk_id,ptk_terdaftar_id:n.ptk_terdaftar.ptk_terdaftar_id,status_kepegawaian_id:e.value.status_kepegawaian_id[n.ptk_id],lembaga_pengangkat_id:e.value.lembaga_pengangkat_id[n.ptk_id],tmt_tugas:e.value.tmt_tugas[n.ptk_id],sk_pengangkatan:e.value.sk_pengangkatan[n.ptk_id],tmt_pengangkatan:e.value.tmt_pengangkatan[n.ptk_id],jenis_ptk_id:e.value.jenis_ptk_id[n.ptk_terdaftar.ptk_terdaftar_id],jabatan_ptk_id:e.value.jabatan_ptk_id[n.ptk_terdaftar.ptk_terdaftar_id],ptk_induk:e.value.ptk_induk[n.ptk_terdaftar.ptk_terdaftar_id],nomor_surat_tugas:e.value.nomor_surat_tugas[n.ptk_terdaftar.ptk_terdaftar_id],tanggal_surat_tugas:e.value.tanggal_surat_tugas[n.ptk_terdaftar.ptk_terdaftar_id],tmt_tugas:e.value.tmt_tugas[n.ptk_terdaftar.ptk_terdaftar_id]},async onResponse(){k.value[n.ptk_id]=!1,m.value=!0}})},c=p([]),Q=async(n,l)=>{console.log(l),c.value[n]=!0,await B("/get-jabatan",{method:"POST",body:{jenis_ptk_id:l},async onResponse({response:s}){let u=s._data;c.value[n]=!1,e.value.jabatan_ptk_id[n]=null,console.log(u),j.value[n]=u}})};return(n,l)=>{const s=W,u=G,f=M,w=O,q=na("RouterLink");return t(V)?(v(),T(U,{key:0,class:"text-center"},{default:i(()=>[r(sa,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):(v(),ta(la,{key:1},[t(y)?(v(),T(U,{key:0},{default:i(()=>[r(X,{class:"pb-4"},{default:i(()=>[r(Z,null,{default:i(()=>l[4]||(l[4]=[g("Data PTK")])),_:1,__:[4]})]),_:1}),r($),r(F,{class:"d-flex flex-wrap gap-4"},{default:i(()=>[d("div",_a,[r(s,{modelValue:t(_).itemsPerPage,"onUpdate:modelValue":l[0]||(l[0]=a=>t(_).itemsPerPage=a),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"15.5rem"}},null,8,["modelValue"])]),r(da),d("div",pa,[r(u,{modelValue:t(_).searchQuery,"onUpdate:modelValue":l[1]||(l[1]=a=>t(_).searchQuery=a),placeholder:"Cari data",style:{"inline-size":"15.625rem"}},null,8,["modelValue"])])]),_:1}),r($),r(oa,{page:t(_).page,"onUpdate:page":l[2]||(l[2]=a=>t(_).page=a),"items-per-page":t(_).itemsPerPage,"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"}],items:t(x),"server-items-length":t(P),"items-length":t(P),headers:N,"items-per-page-text":"Item",options:t(_),loading:t(h),"loading-text":"Loading...","onUpdate:sortBy":R,"header-props":{class:"text-no-wrap"}},{headers:i(({})=>l[5]||(l[5]=[d("tr",null,[d("th",{class:"text-center",colspan:"5"},"Biodata"),d("th",{class:"text-center",colspan:"6",style:{"border-left":`thin solid\r
                  rgba(var(--v-border-color), var(--v-border-opacity))`}}," Penugasan "),d("th",{class:"text-center",rowspan:"2",style:{"border-left":`thin solid\r
                  rgba(var(--v-border-color), var(--v-border-opacity))`}}," aksi ")],-1),d("tr",null,[d("th",{class:"text-center"},"Nama"),d("th",{class:"text-center"},"Status Kepegawaian"),d("th",{class:"text-center"},"sk pengangkatan"),d("th",{class:"text-center"},"tmt pengangkatan"),d("th",{class:"text-center"},"lembaga pengangkat"),d("th",{class:"text-center"},"Jenis PTK"),d("th",{class:"text-center"},"Jabatan PTK"),d("th",{class:"text-center"},"nomor surat tugas"),d("th",{class:"text-center"},"tanggal surat tugas"),d("th",{class:"text-center"},"tmt tugas"),d("th",{class:"text-center",style:{"border-left":`thin solid\r
                  rgba(var(--v-border-color), var(--v-border-opacity))`}}," Induk ")],-1)])),"item.nama":i(({item:a})=>[d("div",ua,[d("div",ga,[d("h6",ma,J(a.nama),1),d("div",ka,J(a.nik),1)])])]),"item.status_kepegawaian_id":i(({item:a})=>[r(f,{modelValue:t(e).status_kepegawaian_id[a.ptk_id],"onUpdate:modelValue":o=>t(e).status_kepegawaian_id[a.ptk_id]=o,items:t(z),placeholder:"== Pilih Status ==","item-title":"nama","item-value":"status_kepegawaian_id",style:{"inline-size":"10rem"}},null,8,["modelValue","onUpdate:modelValue","items"])]),"item.sk_pengangkatan":i(({item:a})=>[r(u,{modelValue:t(e).sk_pengangkatan[a.ptk_id],"onUpdate:modelValue":o=>t(e).sk_pengangkatan[a.ptk_id]=o,placeholder:"SK Pengangkatan",style:{"inline-size":"15.625rem"}},null,8,["modelValue","onUpdate:modelValue"])]),"item.tmt_pengangkatan":i(({item:a})=>[r(w,{style:{"inline-size":"9rem"},modelValue:t(e).tmt_pengangkatan[a.ptk_id],"onUpdate:modelValue":o=>t(e).tmt_pengangkatan[a.ptk_id]=o,placeholder:"== Pilih Tanggal ==",config:t(b)},null,8,["modelValue","onUpdate:modelValue","config"])]),"item.lembaga_pengangkat_id":i(({item:a})=>[r(f,{modelValue:t(e).lembaga_pengangkat_id[a.ptk_id],"onUpdate:modelValue":o=>t(e).lembaga_pengangkat_id[a.ptk_id]=o,items:t(C),placeholder:"== Pilih Lembaga ==","item-title":"nama","item-value":"lembaga_pengangkat_id",style:{"inline-size":"13rem"}},null,8,["modelValue","onUpdate:modelValue","items"])]),"item.jenis_ptk":i(({item:a})=>[r(f,{modelValue:t(e).jenis_ptk_id[a.ptk_terdaftar.ptk_terdaftar_id],"onUpdate:modelValue":[o=>t(e).jenis_ptk_id[a.ptk_terdaftar.ptk_terdaftar_id]=o,o=>Q(a.ptk_terdaftar.ptk_terdaftar_id,o)],items:t(S),placeholder:"== Pilih Jenis PTK ==","item-title":"jenis_ptk","item-value":"jenis_ptk_id",style:{"inline-size":"10rem"}},null,8,["modelValue","onUpdate:modelValue","items"])]),"item.jabatan_ptk":i(({item:a})=>[r(f,{modelValue:t(e).jabatan_ptk_id[a.ptk_terdaftar.ptk_terdaftar_id],"onUpdate:modelValue":o=>t(e).jabatan_ptk_id[a.ptk_terdaftar.ptk_terdaftar_id]=o,items:t(j)[a.ptk_terdaftar.ptk_terdaftar_id],placeholder:"== Pilih Jabatan PTK ==","item-title":"jabatan_ptk","item-value":"jabatan_ptk_id",disabled:t(c)[a.ptk_terdaftar.ptk_terdaftar_id],loading:t(c)[a.ptk_terdaftar.ptk_terdaftar_id],style:{"inline-size":"15rem"}},null,8,["modelValue","onUpdate:modelValue","items","disabled","loading"])]),"item.nomor_surat_tugas":i(({item:a})=>[r(u,{modelValue:t(e).nomor_surat_tugas[a.ptk_terdaftar.ptk_terdaftar_id],"onUpdate:modelValue":o=>t(e).nomor_surat_tugas[a.ptk_terdaftar.ptk_terdaftar_id]=o,placeholder:"Nomor Surat Tugas",style:{"inline-size":"15.625rem"}},null,8,["modelValue","onUpdate:modelValue"])]),"item.tanggal_surat_tugas":i(({item:a})=>[r(w,{style:{"inline-size":"9rem"},modelValue:t(e).tanggal_surat_tugas[a.ptk_terdaftar.ptk_terdaftar_id],"onUpdate:modelValue":o=>t(e).tanggal_surat_tugas[a.ptk_terdaftar.ptk_terdaftar_id]=o,placeholder:"== Pilih Tanggal ==",config:t(b)},null,8,["modelValue","onUpdate:modelValue","config"])]),"item.tmt_tugas":i(({item:a})=>[r(w,{style:{"inline-size":"9rem"},modelValue:t(e).tmt_tugas[a.ptk_terdaftar.ptk_terdaftar_id],"onUpdate:modelValue":o=>t(e).tmt_tugas[a.ptk_terdaftar.ptk_terdaftar_id]=o,placeholder:"== Pilih Tanggal ==",config:t(b)},null,8,["modelValue","onUpdate:modelValue","config"])]),"item.induk":i(({item:a})=>[r(s,{items:[{title:"Ya",value:1},{title:"Tidak",value:0}],modelValue:t(e).ptk_induk[a.ptk_terdaftar.ptk_terdaftar_id],"onUpdate:modelValue":o=>t(e).ptk_induk[a.ptk_terdaftar.ptk_terdaftar_id]=o,style:{"inline-size":"7rem"}},null,8,["modelValue","onUpdate:modelValue"])]),"item.aksi":i(({item:a})=>[r(ra,{size:"small",onClick:o=>E(a),disabled:t(k)[a.ptk_id],loading:t(k)[a.ptk_id]},{default:i(()=>l[6]||(l[6]=[g("Simpan")])),_:2,__:[6]},1032,["onClick","disabled","loading"])]),_:1},8,["page","items-per-page","items","server-items-length","items-length","options","loading"])]),_:1})):(v(),T(U,{key:1,color:"#007BB6"},{default:i(()=>[r(F,null,{default:i(()=>[d("p",ca,[l[8]||(l[8]=g(" Data Sekolah tidak ditemukan. Silahkan Simpan Data Sekolah terlebih dahulu ")),r(q,{class:"text-success ms-1",to:{name:"root"}},{default:i(()=>l[7]||(l[7]=[g(" disini ")])),_:1,__:[7]})])]),_:1})]),_:1})),r(H,{modelValue:t(m),"onUpdate:modelValue":l[3]||(l[3]=a=>ea(m)?m.value=a:null),color:"success",location:"top end"},{default:i(()=>l[9]||(l[9]=[g(" PTK berhasil disimpan. ")])),_:1,__:[9]},8,["modelValue"])],64))}}};export{Ra as default};

import{r as C}from"./validators-BEbcVQR5.js";import{a5 as la,a6 as sa,a9 as na,b as e,p as Y,a8 as ma,X as _a,a7 as fa,br as pa,an as W,aa as ka,F as S,E as ga,r as _,c as V,f as P,l,e as t,k as G,a2 as X,a as ca,o as m,ay as ba,s as v,a0 as Q,Z as Va,d as s,t as f,h as va,$ as ya}from"./main-BsmKIk5B.js";import{_ as ja}from"./AlertDialog-B1UZDB7L.js";import{V as Ta,_ as Pa,i as ha}from"./VForm-C1TNjTFc.js";import{_ as xa}from"./AppAutocomplete-CuQjQxQ0.js";import{_ as Ia}from"./AppTextField-CqS6XxL3.js";import{_ as Sa}from"./JamSinkron-B8QJegc4.js";import{u as Da}from"./useApi-DwkuwgPt.js";import{b as z,d as Ra,e as Ca,f as Na,c as Ka}from"./createUrl-CajvBFNI.js";import{$ as E}from"./api-BHR1kc2J.js";import{V as N,a as w,b as F}from"./VCard-D3TbuSm7.js";import{V as L}from"./VDivider-BEdtlgfd.js";import{V as B}from"./VCardText-CjP1xKPx.js";import{V as aa}from"./VTable-DCrKNSXc.js";import{V as h,a as i}from"./VRow-Crxj3DkM.js";import{a as ea,m as qa,V as Aa}from"./VTextField-DI4LfYYa.js";import"./VDialog-DYuFE8W_.js";import"./forwardRefs-Ch159O2S.js";import"./VImg-Drlr6qiy.js";import"./VList-Rn59Z0oY.js";import"./VAvatar-C3dDoxo3.js";import"./VMenu-08bOKY_R.js";import"./VChip-z02X1wyY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VAlert-DNE6neEQ.js";import"./index-CvOPxmL5.js";/* empty css              */const $a=sa({...Ra({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),ta=la()({name:"VRadio",props:$a(),setup(r,D){let{slots:x}=D;return na(()=>{const k=z.filterProps(r);return e(z,Y(k,{class:["v-radio",r.class],style:r.style,type:"radio"}),x)}),{}}}),Ua=sa({height:{type:[Number,String],default:"auto"},...qa(),...ka(Ca(),["multiple"]),trueIcon:{type:W,default:"$radioOn"},falseIcon:{type:W,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),wa=la()({name:"VRadioGroup",inheritAttrs:!1,props:Ua(),emits:{"update:modelValue":r=>!0},setup(r,D){let{attrs:x,slots:k}=D;const K=ma(),q=_a(()=>r.id||`radio-group-${K}`),g=fa(r,"modelValue");return na(()=>{const[J,y]=pa(x),c=ea.filterProps(r),p=z.filterProps(r),d=k.label?k.label({label:r.label,props:{for:q.value}}):r.label;return e(ea,Y({class:["v-radio-group",r.class],style:r.style},J,c,{modelValue:g.value,"onUpdate:modelValue":b=>g.value=b,id:q.value}),{...k,default:b=>{let{id:j,messagesId:I,isDisabled:M,isReadonly:O}=b;return e(S,null,[d&&e(Aa,{id:j.value},{default:()=>[d]}),e(Na,Y(p,{id:j.value,"aria-describedby":I.value,defaultsTarget:"VRadio",trueIcon:r.trueIcon,falseIcon:r.falseIcon,type:r.type,disabled:M.value,readonly:O.value,"aria-labelledby":d?j.value:void 0,multiple:!1},y,{modelValue:g.value,"onUpdate:modelValue":A=>g.value=A}),k)])}})}),{}}}),Fa={key:0,class:"ms-3"},La={class:"clamp-text text-white mb-0"},Ba={class:"text-center"},Ja={class:"text-center"},Ma={class:"text-center"},Oa={class:"text-center"},Ga={key:1},Ve={__name:"ptk",setup(r){const D={dateFormat:"Y-m-d",locale:ha.Indonesian,altFormat:"j F Y",altInput:!0};ga(async()=>{await q()});const x=_(!1),k=_(),K=_(!1),q=async()=>{var n,a;x.value=!0;try{let T=(await Da(Ka("/cek-sekolah"))).data.value;k.value=T.sekolah,o.value.sekolah_id=(n=T.sekolah)==null?void 0:n.sekolah_id,o.value.tahun_ajaran_id=(a=T.semester)==null?void 0:a.tahun_ajaran_id,I.value.jenis_ptk=T.jenis_ptk,K.value=T.jam_sinkron}catch(R){console.error(R)}finally{x.value=!1}},g=_(!1),J=async n=>{g.value=!0,await E("/get-jabatan",{method:"POST",body:{jenis_ptk_id:n},async onResponse({response:a}){let R=a._data;g.value=!1,o.value.jabatan_ptk_id=null,I.value.jabatan_ptk=R}})},y=_(),c=_({nik:void 0,tahun_ajaran_id:void 0,ptk_terdaftar_id:void 0,sekolah_id:void 0,jenis_ptk_id:void 0,jabatan_ptk_id:void 0,nomor_surat_tugas:void 0,tanggal_surat_tugas:void 0,tmt_tugas:void 0,ptk_induk:void 0}),p=_(!1),d=_(),b=_(),j=_(!1),I=_({jenis_ptk:[],jabatan_ptk:[]}),M=async()=>{c.value.nik=void 0,d.value=void 0,b.value=void 0,j.value=!1,y.value?(p.value=!0,await E("/cari-data",{method:"POST",body:{data:"guru",nik:y.value,sekolah_id:o.value.sekolah_id},async onResponse({response:n}){let a=n._data;j.value=!0,d.value=a.result,b.value=a.ptk,o.value.ptk=d.value,p.value=!1}})):c.value.nik="NIK tidak boleh kosong"},O=n=>{var a={1:"Lulus",2:"Mutasi",3:"Dikeluarkan",4:"Mengundurkan diri",5:"Putus Sekolah",6:"Wafat",7:"Hilang",8:"Alih Fungsi",9:"Pensiun",Z:"Lainnya"};if(n)return a[n]},A=_(),o=_({data:"guru",tahun_ajaran_id:null,ptk_terdaftar_id:null,sekolah_id:null,jenis_ptk_id:null,jabatan_ptk_id:null,nomor_surat_tugas:null,tanggal_surat_tugas:null,tmt_tugas:null,ptk_induk:null,ptk:null}),oa=()=>{var n;(n=A.value)==null||n.validate().then(({valid:a})=>{a&&ua()})},$=_(!1),U=_({color:"",title:"",text:""}),ua=async()=>{p.value=!0,console.log("submit"),await E("/daftar",{method:"POST",body:o.value,async onResponse({response:n}){let a=n._data;p.value=!1,$.value=!0,U.value=a}})},ia=async()=>{o.value.ptk_terdaftar_id=null,o.value.jenis_ptk_id=null,o.value.jabatan_ptk_id=null,o.value.nomor_surat_tugas=null,o.value.tanggal_surat_tugas=null,o.value.tmt_tugas=null,o.value.ptk_induk=null,b.value=null,y.value=void 0,c.value={nik:void 0,tahun_ajaran_id:void 0,ptk_terdaftar_id:void 0,sekolah_id:void 0,jenis_ptk_id:void 0,jabatan_ptk_id:void 0,nomor_surat_tugas:void 0,tanggal_surat_tugas:void 0,tmt_tugas:void 0,ptk_induk:void 0},d.value=void 0,b.value=void 0,j.value=!1,I.value.jabatan_ptk=[]};return(n,a)=>{const R=Sa,T=Ia,da=ca("RouterLink"),H=xa,Z=Pa,ra=ja;return m(),V(S,null,[l(x)?(m(),P(N,{key:0,class:"text-center"},{default:t(()=>[e(ba,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):(m(),V(S,{key:1},[l(k)?(m(),P(N,{key:0},{default:t(()=>[e(w,{class:"pb-4"},{default:t(()=>[e(F,null,{default:t(()=>a[8]||(a[8]=[v("Tarik PTK")])),_:1,__:[8]})]),_:1}),e(L),e(B,null,{default:t(()=>[l(K)?(m(),P(R,{key:0})):(m(),P(T,{key:1,modelValue:l(y),"onUpdate:modelValue":a[0]||(a[0]=u=>X(y)?y.value=u:null),required:"",clearable:"",placeholder:"Masukkan NIK",type:"text",rules:["requiredValidator"in n?n.requiredValidator:l(C)],"error-messages":l(c).nik},{append:t(()=>[e(Q,{icon:n.$vuetify.display.smAndDown,onClick:M,disabled:l(p),loading:l(p)},{default:t(()=>[e(Va,{icon:"tabler-search",color:"#fff",size:"22"}),n.$vuetify.display.mdAndUp?(m(),V("span",Fa,"Cari...")):G("",!0)]),_:1},8,["icon","disabled","loading"])]),_:1},8,["modelValue","rules","error-messages"]))]),_:1})]),_:1})):(m(),P(N,{key:1,color:"#007BB6"},{default:t(()=>[e(B,null,{default:t(()=>[s("p",La,[a[10]||(a[10]=v(" Data Sekolah tidak ditemukan. Silahkan Simpan Data Sekolah terlebih dahulu ")),e(da,{class:"text-success ms-1",to:{name:"root"}},{default:t(()=>a[9]||(a[9]=[v(" disini ")])),_:1,__:[9]})])]),_:1})]),_:1})),l(j)?(m(),V(S,{key:2},[e(N,{class:"mt-4"},{default:t(()=>[e(w,{class:"pb-4"},{default:t(()=>[e(F,null,{default:t(()=>a[11]||(a[11]=[v("Hasil Pencarian")])),_:1,__:[11]})]),_:1}),e(L),l(d)?(m(),P(aa,{key:0},{default:t(()=>[s("tbody",null,[s("tr",null,[a[12]||(a[12]=s("td",null,"Nama",-1)),s("td",null,f(l(d).nama),1)]),s("tr",null,[a[13]||(a[13]=s("td",null,"NIK",-1)),s("td",null,f(l(d).nik),1)]),s("tr",null,[a[14]||(a[14]=s("td",null,"NUPTK",-1)),s("td",null,f(l(d).nuptk),1)]),s("tr",null,[a[15]||(a[15]=s("td",null,"Email",-1)),s("td",null,f(l(d).email),1)]),s("tr",null,[a[16]||(a[16]=s("td",null,"Tempat, Tanggal Lahir",-1)),s("td",null,f(l(d).tempat_lahir)+", "+f(l(d).tanggal_lahir),1)]),s("tr",null,[a[17]||(a[17]=s("td",null,"Nama Ibu Kandung",-1)),s("td",null,f(l(d).nama_ibu_kandung),1)])])]),_:1})):(m(),P(B,{key:1},{default:t(()=>a[18]||(a[18]=[v(" NIK tidak ditemukan! ")])),_:1,__:[18]}))]),_:1}),l(d)?(m(),V(S,{key:0},[e(N,{class:"mt-4"},{default:t(()=>[e(w,{class:"pb-4"},{default:t(()=>[e(F,null,{default:t(()=>a[19]||(a[19]=[v("Riwayat PTK Terdaftar")])),_:1,__:[19]})]),_:1}),e(L),e(aa,null,{default:t(()=>[a[21]||(a[21]=s("thead",null,[s("tr",null,[s("th",{class:"text-center"},"Nama Sekolah"),s("th",{class:"text-center"},"NPSN"),s("th",{class:"text-center"},"Tahun"),s("th",{class:"text-center"},"Jenis Keluar"),s("th",{class:"text-center"},"Tanggal Keluar")])],-1)),s("tbody",null,[l(d).terdaftar.length?(m(!0),V(S,{key:0},va(l(d).terdaftar,u=>(m(),V("tr",{key:u.ptk_terdaftar_id},[s("td",null,f(u.sekolah.nama),1),s("td",Ba,f(u.sekolah.npsn),1),s("td",Ja,f(u.tahun_ajaran_id),1),s("td",Ma,f(O(u.jenis_keluar_id)),1),s("td",Oa,f(u.tgl_ptk_keluar),1)]))),128)):(m(),V("tr",Ga,a[20]||(a[20]=[s("td",{class:"text-center",colspan:"5"}," Tidak ada data untuk ditampilkan ",-1)])))])]),_:1,__:[21]})]),_:1}),e(N,{class:"mt-4"},{default:t(()=>[e(w,{class:"pb-4"},{default:t(()=>[e(F,null,{default:t(()=>a[22]||(a[22]=[v("Registrasi PTK")])),_:1,__:[22]})]),_:1}),e(L),e(B,null,{default:t(()=>[l(b)?(m(),V(S,{key:0},[v(" PTK Telah Terdaftar ")],64)):(m(),P(Ta,{key:1,ref_key:"refVForm",ref:A,onSubmit:ya(oa,["prevent"])},{default:t(()=>[e(h,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(h,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[23]||(a[23]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"jenis_ptk_id"},"Jenis PTK ",-1)])),_:1,__:[23]}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(H,{id:"jenis_ptk_id",modelValue:l(o).jenis_ptk_id,"onUpdate:modelValue":[a[1]||(a[1]=u=>l(o).jenis_ptk_id=u),J],items:l(I).jenis_ptk,placeholder:"== Pilih Jenis PTK ==","item-title":"jenis_ptk","item-value":"jenis_ptk_id",rules:["requiredValidator"in n?n.requiredValidator:l(C)],"error-messages":l(c).jenis_ptk_id},null,8,["modelValue","items","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(h,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[24]||(a[24]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"jabatan_ptk_id"},"Jabatan PTK",-1)])),_:1,__:[24]}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(H,{id:"jabatan_ptk_id",modelValue:l(o).jabatan_ptk_id,"onUpdate:modelValue":a[2]||(a[2]=u=>l(o).jabatan_ptk_id=u),items:l(I).jabatan_ptk,placeholder:"== Pilih Jabatan PTK ==","item-title":"jabatan_ptk","item-value":"jabatan_ptk_id",disabled:l(g),loading:l(g),rules:["requiredValidator"in n?n.requiredValidator:l(C)],"error-messages":l(c).jabatan_ptk_id},null,8,["modelValue","items","disabled","loading","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(h,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[25]||(a[25]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"nomor_surat_tugas"},"Nomor Surat Tugas",-1)])),_:1,__:[25]}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(T,{id:"nomor_surat_tugas",modelValue:l(o).nomor_surat_tugas,"onUpdate:modelValue":a[3]||(a[3]=u=>l(o).nomor_surat_tugas=u),placeholder:"Nomor Surat Tugas","persistent-placeholder":"",rules:["requiredValidator"in n?n.requiredValidator:l(C)],"error-messages":l(c).nomor_surat_tugas},null,8,["modelValue","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(h,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[26]||(a[26]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_surat_tugas"},"Tanggal Surat Tugas ",-1)])),_:1,__:[26]}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(Z,{id:"tanggal_surat_tugas",modelValue:l(o).tanggal_surat_tugas,"onUpdate:modelValue":a[4]||(a[4]=u=>l(o).tanggal_surat_tugas=u),rules:["requiredValidator"in n?n.requiredValidator:l(C)],placeholder:"== Pilih Tanggal ==",config:D},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(h,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[27]||(a[27]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"tmt_tugas"},"TMT Tugas ",-1)])),_:1,__:[27]}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(Z,{id:"tmt_tugas",modelValue:l(o).tmt_tugas,"onUpdate:modelValue":a[5]||(a[5]=u=>l(o).tmt_tugas=u),rules:["requiredValidator"in n?n.requiredValidator:l(C)],placeholder:"== Pilih Tanggal ==",config:D},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(h,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[28]||(a[28]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"nomor_surat_tugas"},"PTK Induk",-1)])),_:1,__:[28]}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(wa,{modelValue:l(o).ptk_induk,"onUpdate:modelValue":a[6]||(a[6]=u=>l(o).ptk_induk=u)},{default:t(()=>[e(ta,{label:"Ya",value:1}),e(ta,{label:"Tidak",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(h,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",md:"3"}),e(i,{cols:"12",md:"9"},{default:t(()=>[e(Q,{type:"submit",class:"me-4",disabled:l(p),loading:l(p)},{default:t(()=>a[29]||(a[29]=[v(" Simpan ")])),_:1,__:[29]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512))]),_:1})]),_:1})],64)):G("",!0)],64)):G("",!0)],64)),e(ra,{isDialogVisible:l($),"onUpdate:isDialogVisible":a[7]||(a[7]=u=>X($)?$.value=u:null),"confirm-color":l(U).color,"confirm-title":l(U).title,"confirm-msg":l(U).text,onConfirm:ia},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])],64)}}};export{Ve as default};

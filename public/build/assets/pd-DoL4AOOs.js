import{_ as da,r as I,V as ua,a as ma,i as _a}from"./VForm-BaXi_tzB.js";import{a5 as ka,a6 as pa,at as fa,ad as ca,aQ as ga,aR as ba,aS as va,ai as ya,aD as ha,ae as Va,a9 as ja,b as l,ak as Da,ab as Ca,al as Pa,aJ as xa,am as Sa,aT as Ta,aU as Na,ac as wa,aV as Aa,E as Ia,r as k,c as p,f as c,l as s,e as t,F as P,k as x,a2 as G,a as Ra,o as r,ay as Ba,s as m,a0 as S,Z as X,d as e,t as u,h as aa,$ as $a}from"./main-BBeR6XVV.js";import{_ as qa}from"./AppAutocomplete-WW741ojG.js";import{_ as La}from"./AppTextField-B4jbp4LJ.js";import{u as Fa}from"./useApi-CPOtDUZ3.js";import{c as Ka,V as W}from"./VTable-DgoB2Tvy.js";import{$ as H}from"./api-dBY3XVoR.js";import{V as T,a as F,b as K}from"./VCard-CR52vXdf.js";import{V as U}from"./VDivider-BMJX0LFQ.js";import{V as z}from"./VCardText-C64EnDVd.js";import{V as ea}from"./VAlert-B6DZWnSO.js";import{q as Ua}from"./VDataTable-DZtmsngT.js";import{V as N,a as _}from"./VRow-DCkiN6iK.js";import"./VDialog-CEggmTKD.js";import"./forwardRefs-A04Mi118.js";import"./VImg-Dluj_JUu.js";import"./VTextField-BphGpWbK.js";import"./VList-Cax3Dcs5.js";import"./VAvatar-uTJpscJT.js";import"./VMenu-DS0P4sCM.js";import"./VChip-DjWddHzB.js";import"./index-CvOPxmL5.js";/* empty css              */const za=pa({color:String,...Aa(),...wa(),...Na(),...Ta(),...Sa(),...xa(),...Pa(),...Ca(),...Da()},"VSheet"),Ma=ka()({name:"VSheet",props:za(),setup(f,M){let{slots:w}=M;const{themeClasses:R}=fa(f),{backgroundColorClasses:B,backgroundColorStyles:J}=ca(()=>f.color),{borderClasses:v}=ga(f),{dimensionStyles:y}=ba(f),{elevationClasses:h}=va(f),{locationStyles:b}=ya(f),{positionClasses:d}=ha(f),{roundedClasses:C}=Va(f);return ja(()=>l(f.tag,{class:["v-sheet",R.value,B.value,v.value,h.value,d.value,C.value,f.class],style:[J.value,y.value,b.value,f.style]},w)),{}}}),Ja={key:0,class:"ms-3"},Ea={class:"clamp-text text-white mb-0"},Oa=["colspan"],Wa={class:"py-2"},Ha={class:"py-2"},Ya={class:"py-2"},Za={class:"py-2"},Qa={class:"py-2"},Ga={key:1},Xa=["onClick"],ae={class:"text-center"},ee={class:"text-center"},le={class:"text-center"},te={class:"py-2"},se={key:1},ne={key:0},Ne={__name:"pd",setup(f){const M={dateFormat:"Y-m-d",locale:_a.Indonesian,altFormat:"j F Y",altInput:!0};Ia(async()=>{await J()});const w=k(!1),R=k(),B=k(!0),J=async()=>{var o,a;w.value=!0;try{let V=(await Fa(Ka("/cek-sekolah"))).data.value;R.value=V.sekolah,n.value.sekolah_id=(o=V.sekolah)==null?void 0:o.sekolah_id,n.value.tahun_ajaran_id=(a=V.semester)==null?void 0:a.tahun_ajaran_id,A.value.jenis_pendaftaran=V.jenis_pendaftaran,B.value=V.jam_sinkron}catch(D){console.error(D)}finally{w.value=!1}},v=k(),y=k(),h=k({jenis_pendaftaran_id:null,tanggal_masuk_sekolah:null,nipd:null,rombongan_belajar_id:null}),b=k(!1),d=k(),C=k(!1),A=k({jenis_pendaftaran:[],rombongan_belajar:[]}),la=async()=>{h.value.nik=void 0,d.value=void 0,n.value.peserta_didik=void 0,C.value=!1,y.value=void 0,v.value?(b.value=!0,await H("/cari-data",{method:"POST",body:{data:"siswa",nik:v.value,sekolah_id:n.value.sekolah_id},async onResponse({response:o}){let a=o._data;C.value=!0,y.value=a.pd,d.value=a.result,A.value.rombongan_belajar=a.rombongan_belajar,n.value.ptk=d.value,b.value=!1}})):h.value.nik="NIK tidak boleh kosong"},Y=o=>{var a={1:"Lulus",2:"Mutasi",3:"Dikeluarkan",4:"Mengundurkan diri",5:"Putus Sekolah",6:"Wafat",7:"Hilang",8:"Alih Fungsi",9:"Pensiun",Z:"Lainnya"};if(o)return a[o]},Z=k(),n=k({data:"siswa",sekolah_id:null,nik:null,registrasi_id:null,jenis_pendaftaran_id:null,tanggal_masuk_sekolah:null,nipd:null,a_pernah_paud:null,a_pernah_tk:null,sekolah_asal:null,id_hobby:null,id_cita:null,rombongan_belajar_id:null,peserta_didik:null}),ta=()=>{var o;(o=Z.value)==null||o.validate().then(({valid:a})=>{a&&sa()})},$=k(!1),q=k({color:"",title:"",text:""}),sa=async()=>{b.value=!0,await H("/daftar",{method:"POST",body:n.value,async onResponse({response:o}){let a=o._data;b.value=!1,$.value=!0,q.value=a}})},na=async()=>{n.value.registrasi_id=null,n.value.jenis_pendaftaran_id=null,n.value.tanggal_masuk_sekolah=null,n.value.nipd=null,n.value.a_pernah_paud=null,n.value.a_pernah_tk=null,n.value.sekolah_asal=null,n.value.id_hobby=null,n.value.id_cita=null,n.value.rombongan_belajar_id=null,n.value.peserta_didik=null,v.value=void 0,h.value={jenis_pendaftaran_id:null,tanggal_masuk_sekolah:null,nipd:null,rombongan_belajar_id:null},d.value=[],C.value=!1,A.value.rombongan_belajar=[]},E=async(o,a)=>{a&&(n.value.a_pernah_paud=a.a_pernah_paud,n.value.a_pernah_tk=a.a_pernah_tk,n.value.sekolah_asal=a.sekolah.nama,n.value.id_hobby=a.id_hobby,n.value.id_cita=a.id_cita),await H("/cek-pd",{method:"POST",body:{sekolah_id:n.value.sekolah_id,peserta_didik_id:o.peserta_didik_id,nik:v.value},async onResponse({response:D}){const V=D._data;y.value=V.pd,Array.isArray(d.value)?n.value.peserta_didik=d.value.find(L=>L.peserta_didik_id===o.peserta_didik_id):n.value.peserta_didik=d.value}})},oa=o=>{console.log(o)};return(o,a)=>{const D=La,V=Ra("RouterLink"),L=qa,ia=ma,ra=da;return r(),p(P,null,[s(w)?(r(),c(T,{key:0,class:"text-center"},{default:t(()=>[l(Ba,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):(r(),p(P,{key:1},[s(R)?(r(),c(T,{key:0},{default:t(()=>[l(F,{class:"pb-4"},{default:t(()=>[l(K,null,{default:t(()=>a[6]||(a[6]=[m("Tarik PD")])),_:1,__:[6]})]),_:1}),l(U),l(z,null,{default:t(()=>[s(B)?(r(),c(D,{key:0,modelValue:s(v),"onUpdate:modelValue":a[0]||(a[0]=i=>G(v)?v.value=i:null),required:"",clearable:"",placeholder:"Masukkan NIK",type:"text",rules:["requiredValidator"in o?o.requiredValidator:s(I)],"error-messages":s(h).nik},{append:t(()=>[l(S,{icon:o.$vuetify.display.smAndDown,onClick:la,disabled:s(b),loading:s(b)},{default:t(()=>[l(X,{icon:"tabler-search",color:"#fff",size:"22"}),o.$vuetify.display.mdAndUp?(r(),p("span",Ja,"Cari...")):x("",!0)]),_:1},8,["icon","disabled","loading"])]),_:1},8,["modelValue","rules","error-messages"])):(r(),c(ea,{key:1,color:"error",class:"text-center",variant:"tonal"},{default:t(()=>a[7]||(a[7]=[e("h2",{class:"mt-4 mb-4"},"Penyesuaian Waktu Layanan Tarik Data Dapodik",-1),e("p",null,[m(" Dikarenakan adanya proses rutin sinkronisasi data Dapodik di Server PUSDATIN, "),e("br"),m("maka layanan sinkronisasi hanya dapat diakses antara pukul "),e("span",{class:"text-danger"},[e("b",null,"03.00 s/d 24.00 (WIB)")])],-1)])),_:1,__:[7]}))]),_:1})]),_:1})):(r(),c(T,{key:1,color:"#007BB6"},{default:t(()=>[l(z,null,{default:t(()=>[e("p",Ea,[a[9]||(a[9]=m(" Data Sekolah tidak ditemukan. Silahkan Simpan Data Sekolah terlebih dahulu ")),l(V,{class:"text-success ms-1",to:{name:"root"}},{default:t(()=>a[8]||(a[8]=[m(" disini ")])),_:1,__:[8]})])]),_:1})]),_:1})),s(C)?(r(),p(P,{key:2},[l(T,{class:"mt-4"},{default:t(()=>[l(F,{class:"pb-4"},{default:t(()=>[l(K,null,{default:t(()=>a[10]||(a[10]=[m("Hasil Pencarian")])),_:1,__:[10]})]),_:1}),l(U),s(d)?(r(),p(P,{key:0},[Array.isArray(s(d))?(r(),c(Ua,{key:1,headers:[{title:"Nama",key:"nama"},{title:"NIK",key:"nik"},{title:"NISN",key:"nisn"},{title:"Tempat, Tanggal Lahir",key:"tempat"},{title:"Nama Ibu Kandung",key:"nama_ibu_kandung"},{title:"Detil",key:"data-table-expand",align:"end"}],items:s(d),"item-value":"peserta_didik_id","show-expand":""},{"item.tempat":t(({item:i})=>[m(u(i.tempat_lahir)+", "+u(i.tanggal_lahir),1)]),"item.data-table-expand":t(({internalItem:i,isExpanded:j,toggleExpand:g})=>[l(S,{"append-icon":j(i)?"tabler-chevron-up":"tabler-chevron-down",text:j(i)?"Tutup":"Detil",class:"text-none",color:"medium-emphasis",size:"small",variant:"text",width:"105",border:"",slim:"",onClick:O=>g(i)},null,8,["append-icon","text","onClick"])]),"expanded-row":t(({columns:i,item:j})=>[e("tr",null,[e("td",{colspan:i.length,class:"py-2"},[l(Ma,{rounded:"lg",border:""},{default:t(()=>[l(W,{density:"compact"},{default:t(()=>[a[19]||(a[19]=e("tbody",{class:"bg-surface-light"},[e("tr",null,[e("th",null,"Nama Sekolah"),e("th",null,"NPSN"),e("th",null,"Jenis Keluar"),e("th",null,"Tanggal Keluar"),e("th",null,"Daftarkan")])],-1)),e("tbody",null,[j.registrasi_pd.length?(r(!0),p(P,{key:0},aa(j.registrasi_pd,g=>{var O,Q;return r(),p("tr",{key:g.registrasi_id},[e("td",Wa,u((O=g.sekolah)==null?void 0:O.nama),1),e("td",Ha,u((Q=g.sekolah)==null?void 0:Q.npsn),1),e("td",Ya,u(Y(g.jenis_keluar_id)),1),e("td",Za,u(g.tanggal_keluar),1),e("td",Qa,[l(S,{size:"small",onClick:oe=>E(j,g)},{default:t(()=>a[16]||(a[16]=[m("Daftarkan")])),_:2,__:[16]},1032,["onClick"])])])}),128)):(r(),p("tr",Ga,[a[18]||(a[18]=e("td",{class:"py-2 text-center",colspan:"4"}," Tidak data untuk ditampilan ",-1)),e("td",null,[l(S,{size:"small",onClick:g=>E(j,null)},{default:t(()=>a[17]||(a[17]=[m("Daftarkan")])),_:2,__:[17]},1032,["onClick"])])]))])]),_:2,__:[19]},1024)]),_:2},1024)],8,Oa)])]),_:1},8,["items"])):(r(),c(W,{key:0},{default:t(()=>[e("tbody",null,[e("tr",null,[a[11]||(a[11]=e("td",null,"Nama",-1)),e("td",null,u(s(d).nama),1)]),e("tr",null,[a[12]||(a[12]=e("td",null,"NIK",-1)),e("td",null,u(s(d).nik),1)]),e("tr",null,[a[13]||(a[13]=e("td",null,"NISN",-1)),e("td",null,u(s(d).nisn),1)]),e("tr",null,[a[14]||(a[14]=e("td",null,"Tempat, Tanggal Lahir",-1)),e("td",null,u(s(d).tempat_lahir)+", "+u(s(d).tanggal_lahir),1)]),e("tr",null,[a[15]||(a[15]=e("td",null,"Nama Ibu Kandung",-1)),e("td",null,u(s(d).nama_ibu_kandung),1)])])]),_:1}))],64)):(r(),c(z,{key:1},{default:t(()=>a[20]||(a[20]=[m(" NIK tidak ditemukan! ")])),_:1,__:[20]}))]),_:1}),s(d)&&!Array.isArray(s(d))?(r(),c(T,{key:0,class:"mt-4"},{default:t(()=>[l(F,{class:"pb-4"},{default:t(()=>[l(K,null,{default:t(()=>a[21]||(a[21]=[m("Riwayat Pendidikan Siswa")])),_:1,__:[21]})]),_:1}),l(U),l(W,null,{default:t(()=>[a[24]||(a[24]=e("thead",null,[e("tr",null,[e("th",null,"Nama Sekolah"),e("th",{class:"text-center"},"NPSN"),e("th",{class:"text-center"},"Jenis Keluar"),e("th",{class:"text-center"},"Tanggal Keluar"),e("th",{class:"text-center"},"Daftarkan")])],-1)),e("tbody",null,[s(d).registrasi_pd.length?(r(!0),p(P,{key:0},aa(s(d).registrasi_pd,(i,j)=>(r(),p("tr",{key:i.registrasi_id},[e("td",null,[m(u(i.sekolah.nama)+" ",1),i.sekolah_id.toLowerCase()===s(n).sekolah_id?(r(),p("a",{key:0,href:"javascript:void(0)",onClick:g=>oa(i.registrasi_id)},[l(X,{icon:"tabler-clipboard-check"})],8,Xa)):x("",!0)]),e("td",ae,u(i.sekolah.npsn),1),e("td",ee,u(Y(i.jenis_keluar_id)),1),e("td",le,u(i.tanggal_keluar),1),e("td",te,[l(S,{size:"small",onClick:g=>E(s(d),i)},{default:t(()=>a[22]||(a[22]=[m("Daftarkan")])),_:2,__:[22]},1032,["onClick"])])]))),128)):(r(),p("tr",se,a[23]||(a[23]=[e("td",{colspan:"4",class:"py-4 text-center"}," Tidak ada data untuk ditampilkan ",-1)])))])]),_:1,__:[24]})]),_:1})):x("",!0),s(n).peserta_didik?(r(),c(T,{key:1,class:"mt-4"},{default:t(()=>[l(F,{class:"pb-4"},{default:t(()=>[l(K,null,{default:t(()=>a[25]||(a[25]=[m("Daftarkan Peserta Didik")])),_:1,__:[25]})]),_:1}),l(U),l(z,null,{default:t(()=>[s(y)?(r(),c(ea,{key:0,color:"error"},{default:t(()=>[m(" Peserta Didik atas nama "+u(s(y).nama)+" telah terdaftar ",1),s(y).kelas?(r(),p("span",ne,"di Rombongan Belajar "+u(s(y).kelas.nama),1)):x("",!0)]),_:1})):(r(),c(ua,{key:1,ref_key:"refVForm",ref:Z,onSubmit:$a(ta,["prevent"])},{default:t(()=>[l(N,null,{default:t(()=>[l(_,{cols:"12"},{default:t(()=>[l(N,{"no-gutters":""},{default:t(()=>[l(_,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[26]||(a[26]=[e("label",{class:"v-label text-body-2 text-high-emphasis",for:"jenis_pendaftaran_id"},"Jenis Pendaftaran ",-1)])),_:1,__:[26]}),l(_,{cols:"12",md:"9"},{default:t(()=>[l(L,{id:"jenis_ptk_id",modelValue:s(n).jenis_pendaftaran_id,"onUpdate:modelValue":a[1]||(a[1]=i=>s(n).jenis_pendaftaran_id=i),items:s(A).jenis_pendaftaran,placeholder:"== Pilih Jenis Pendaftaran ==","item-title":"nama","item-value":"jenis_pendaftaran_id",rules:["requiredValidator"in o?o.requiredValidator:s(I)],"error-messages":s(h).jenis_pendaftaran_id},null,8,["modelValue","items","rules","error-messages"])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12"},{default:t(()=>[l(N,{"no-gutters":""},{default:t(()=>[l(_,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[27]||(a[27]=[e("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_masuk_sekolah"},"Tanggal Masuk Sekolah ",-1)])),_:1,__:[27]}),l(_,{cols:"12",md:"9"},{default:t(()=>[l(ia,{id:"tanggal_masuk_sekolah",modelValue:s(n).tanggal_masuk_sekolah,"onUpdate:modelValue":a[2]||(a[2]=i=>s(n).tanggal_masuk_sekolah=i),rules:["requiredValidator"in o?o.requiredValidator:s(I)],placeholder:"== Pilih Tanggal ==",config:M},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12"},{default:t(()=>[l(N,{"no-gutters":""},{default:t(()=>[l(_,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[28]||(a[28]=[e("label",{class:"v-label text-body-2 text-high-emphasis",for:"nipd"},"Nomor Induk Siswa",-1)])),_:1,__:[28]}),l(_,{cols:"12",md:"9"},{default:t(()=>[l(D,{id:"nipd",modelValue:s(n).nipd,"onUpdate:modelValue":a[3]||(a[3]=i=>s(n).nipd=i),placeholder:"Nomor Induk Siswa","persistent-placeholder":"",rules:["requiredValidator"in o?o.requiredValidator:s(I)],"error-messages":s(h).nipd},null,8,["modelValue","rules","error-messages"])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12"},{default:t(()=>[l(N,{"no-gutters":""},{default:t(()=>[l(_,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[29]||(a[29]=[e("label",{class:"v-label text-body-2 text-high-emphasis",for:"rombongan_belajar_id"},"Rombongan Belajar",-1)])),_:1,__:[29]}),l(_,{cols:"12",md:"9"},{default:t(()=>[l(L,{id:"rombongan_belajar_id",modelValue:s(n).rombongan_belajar_id,"onUpdate:modelValue":a[4]||(a[4]=i=>s(n).rombongan_belajar_id=i),items:s(A).rombongan_belajar,placeholder:"== Pilih Rombongan Belajar ==","item-title":"nama","item-value":"rombongan_belajar_id",rules:["requiredValidator"in o?o.requiredValidator:s(I)],"error-messages":s(h).rombongan_belajar_id},null,8,["modelValue","items","rules","error-messages"])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12"},{default:t(()=>[l(N,{"no-gutters":""},{default:t(()=>[l(_,{cols:"12",md:"3"}),l(_,{cols:"12",md:"9"},{default:t(()=>[l(S,{type:"submit",class:"me-4",disabled:s(b),loading:s(b)},{default:t(()=>a[30]||(a[30]=[m(" Simpan ")])),_:1,__:[30]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512))]),_:1})]),_:1})):x("",!0)],64)):x("",!0)],64)),l(ra,{isDialogVisible:s($),"onUpdate:isDialogVisible":a[5]||(a[5]=i=>G($)?$.value=i:null),"confirm-color":s(q).color,"confirm-title":s(q).title,"confirm-msg":s(q).text,onConfirm:na},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])],64)}}};export{Ne as default};

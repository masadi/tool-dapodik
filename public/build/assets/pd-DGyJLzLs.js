import{_ as ia,r as R,V as ra,a as da,i as ua}from"./VForm-ChKTXDiy.js";import{a5 as ma,a6 as _a,at as pa,ad as ka,aQ as fa,aR as ca,aS as ga,ai as ba,aD as va,ae as ya,a9 as ha,b as e,ak as Va,ab as ja,al as Ca,aJ as Da,am as Pa,aT as xa,aU as Sa,ac as Na,aV as Ta,E as wa,r as p,c as k,f as b,l as s,e as l,F as x,k as S,a2 as W,a as Aa,o as d,ay as Ra,s as _,a0 as N,Z as G,d as t,t as u,h as X,$ as $a}from"./main-CCJ5T2-D.js";import{_ as qa}from"./AppAutocomplete-BFrhZann.js";import{_ as Ba}from"./AppTextField-BmQipdZ_.js";import{u as Ia}from"./useApi-BjJoDiYi.js";import{c as La,V as O}from"./VTable-Bo6buZGJ.js";import{$ as H}from"./api-B6Ox8Ua5.js";import{V as T,a as L,b as F}from"./VCard-2Ii_gU5R.js";import{V as K}from"./VDivider-DffZOg5n.js";import{V as U}from"./VCardText-BW6FwYxh.js";import{q as Fa}from"./VDataTable-BinjB1eK.js";import{V as Ka}from"./VAlert-DcQjK3TB.js";import{V as w,a as m}from"./VRow-DE06CpNM.js";import"./VDialog-DbtNfX42.js";import"./forwardRefs-Cxuu9n3G.js";import"./VImg-C9auLam7.js";import"./VTextField-3653JomD.js";import"./VList-BShTemw6.js";import"./VAvatar-DMPVQInn.js";import"./VMenu-ByVcVB6X.js";import"./VChip-BZ38hErg.js";import"./index-CvOPxmL5.js";/* empty css              */const Ua=_a({color:String,...Ta(),...Na(),...Sa(),...xa(),...Pa(),...Da(),...Ca(),...ja(),...Va()},"VSheet"),za=ma()({name:"VSheet",props:Ua(),setup(f,z){let{slots:A}=z;const{themeClasses:$}=pa(f),{backgroundColorClasses:M,backgroundColorStyles:v}=ka(()=>f.color),{borderClasses:y}=fa(f),{dimensionStyles:h}=ca(f),{elevationClasses:g}=ga(f),{locationStyles:r}=ba(f),{positionClasses:P}=va(f),{roundedClasses:C}=ya(f);return ha(()=>e(f.tag,{class:["v-sheet",$.value,M.value,y.value,g.value,P.value,C.value,f.class],style:[v.value,h.value,r.value,f.style]},A)),{}}}),Ma={key:0,class:"ms-3"},Ja={class:"clamp-text text-white mb-0"},Ea=["colspan"],Oa={class:"py-2"},Ha={class:"py-2"},Ya={class:"py-2"},Za={class:"py-2"},Qa={class:"py-2"},Wa={key:1},Ga=["onClick"],Xa={class:"text-center"},ae={class:"text-center"},ee={class:"text-center"},le={class:"py-2"},te={key:1},se={key:0},Ne={__name:"pd",setup(f){const z={dateFormat:"Y-m-d",locale:ua.Indonesian,altFormat:"j F Y",altInput:!0};wa(async()=>{await M()});const A=p(!1),$=p(),M=async()=>{var o,a;A.value=!0;try{let V=(await Ia(La("/cek-sekolah"))).data.value;$.value=V.sekolah,n.value.sekolah_id=(o=V.sekolah)==null?void 0:o.sekolah_id,n.value.tahun_ajaran_id=(a=V.semester)==null?void 0:a.tahun_ajaran_id,C.value.jenis_pendaftaran=V.jenis_pendaftaran}catch(D){console.error(D)}finally{A.value=!1}},v=p(),y=p(),h=p({jenis_pendaftaran_id:null,tanggal_masuk_sekolah:null,nipd:null,rombongan_belajar_id:null}),g=p(!1),r=p(),P=p(!1),C=p({jenis_pendaftaran:[],rombongan_belajar:[]}),aa=async()=>{h.value.nik=void 0,r.value=void 0,n.value.peserta_didik=void 0,P.value=!1,y.value=void 0,v.value?(g.value=!0,await H("/cari-data",{method:"POST",body:{data:"siswa",nik:v.value,sekolah_id:n.value.sekolah_id},async onResponse({response:o}){let a=o._data;P.value=!0,y.value=a.pd,r.value=a.result,C.value.rombongan_belajar=a.rombongan_belajar,n.value.ptk=r.value,g.value=!1}})):h.value.nik="NIK tidak boleh kosong"},Y=o=>{var a={1:"Lulus",2:"Mutasi",3:"Dikeluarkan",4:"Mengundurkan diri",5:"Putus Sekolah",6:"Wafat",7:"Hilang",8:"Alih Fungsi",9:"Pensiun",Z:"Lainnya"};if(o)return a[o]},Z=p(),n=p({data:"siswa",sekolah_id:null,nik:null,registrasi_id:null,jenis_pendaftaran_id:null,tanggal_masuk_sekolah:null,nipd:null,a_pernah_paud:null,a_pernah_tk:null,sekolah_asal:null,id_hobby:null,id_cita:null,rombongan_belajar_id:null,peserta_didik:null}),ea=()=>{var o;(o=Z.value)==null||o.validate().then(({valid:a})=>{a&&la()})},q=p(!1),B=p({color:"",title:"",text:""}),la=async()=>{g.value=!0,await H("/daftar",{method:"POST",body:n.value,async onResponse({response:o}){let a=o._data;g.value=!1,q.value=!0,B.value=a}})},ta=async()=>{n.value.registrasi_id=null,n.value.jenis_pendaftaran_id=null,n.value.tanggal_masuk_sekolah=null,n.value.nipd=null,n.value.a_pernah_paud=null,n.value.a_pernah_tk=null,n.value.sekolah_asal=null,n.value.id_hobby=null,n.value.id_cita=null,n.value.rombongan_belajar_id=null,n.value.peserta_didik=null,v.value=void 0,h.value={jenis_pendaftaran_id:null,tanggal_masuk_sekolah:null,nipd:null,rombongan_belajar_id:null},r.value=[],P.value=!1,C.value.rombongan_belajar=[]},J=async(o,a)=>{a&&(n.value.a_pernah_paud=a.a_pernah_paud,n.value.a_pernah_tk=a.a_pernah_tk,n.value.sekolah_asal=a.sekolah.nama,n.value.id_hobby=a.id_hobby,n.value.id_cita=a.id_cita),await H("/cek-pd",{method:"POST",body:{sekolah_id:n.value.sekolah_id,peserta_didik_id:o.peserta_didik_id,nik:v.value},async onResponse({response:D}){const V=D._data;y.value=V.pd,Array.isArray(r.value)?n.value.peserta_didik=r.value.find(I=>I.peserta_didik_id===o.peserta_didik_id):n.value.peserta_didik=r.value}})},sa=o=>{console.log(o)};return(o,a)=>{const D=Ba,V=Aa("RouterLink"),I=qa,na=da,oa=ia;return d(),k(x,null,[s(A)?(d(),b(T,{key:0,class:"text-center"},{default:l(()=>[e(Ra,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):(d(),k(x,{key:1},[s($)?(d(),b(T,{key:0},{default:l(()=>[e(L,{class:"pb-4"},{default:l(()=>[e(F,null,{default:l(()=>a[6]||(a[6]=[_("Tarik PD")])),_:1,__:[6]})]),_:1}),e(K),e(U,null,{default:l(()=>[e(D,{modelValue:s(v),"onUpdate:modelValue":a[0]||(a[0]=i=>W(v)?v.value=i:null),required:"",clearable:"",placeholder:"Masukkan NIK",type:"text",rules:["requiredValidator"in o?o.requiredValidator:s(R)],"error-messages":s(h).nik},{append:l(()=>[e(N,{icon:o.$vuetify.display.smAndDown,onClick:aa,disabled:s(g),loading:s(g)},{default:l(()=>[e(G,{icon:"tabler-search",color:"#fff",size:"22"}),o.$vuetify.display.mdAndUp?(d(),k("span",Ma,"Cari...")):S("",!0)]),_:1},8,["icon","disabled","loading"])]),_:1},8,["modelValue","rules","error-messages"])]),_:1})]),_:1})):(d(),b(T,{key:1,color:"#007BB6"},{default:l(()=>[e(U,null,{default:l(()=>[t("p",Ja,[a[8]||(a[8]=_(" Data Sekolah tidak ditemukan. Silahkan Simpan Data Sekolah terlebih dahulu ")),e(V,{class:"text-success ms-1",to:{name:"root"}},{default:l(()=>a[7]||(a[7]=[_(" disini ")])),_:1,__:[7]})])]),_:1})]),_:1})),s(P)?(d(),k(x,{key:2},[e(T,{class:"mt-4"},{default:l(()=>[e(L,{class:"pb-4"},{default:l(()=>[e(F,null,{default:l(()=>a[9]||(a[9]=[_("Hasil Pencarian")])),_:1,__:[9]})]),_:1}),e(K),s(r)?(d(),k(x,{key:0},[Array.isArray(s(r))?(d(),b(Fa,{key:1,headers:[{title:"Nama",key:"nama"},{title:"NIK",key:"nik"},{title:"NISN",key:"nisn"},{title:"Tempat, Tanggal Lahir",key:"tempat"},{title:"Nama Ibu Kandung",key:"nama_ibu_kandung"},{title:"Detil",key:"data-table-expand",align:"end"}],items:s(r),"item-value":"peserta_didik_id","show-expand":""},{"item.tempat":l(({item:i})=>[_(u(i.tempat_lahir)+", "+u(i.tanggal_lahir),1)]),"item.data-table-expand":l(({internalItem:i,isExpanded:j,toggleExpand:c})=>[e(N,{"append-icon":j(i)?"tabler-chevron-up":"tabler-chevron-down",text:j(i)?"Tutup":"Detil",class:"text-none",color:"medium-emphasis",size:"small",variant:"text",width:"105",border:"",slim:"",onClick:E=>c(i)},null,8,["append-icon","text","onClick"])]),"expanded-row":l(({columns:i,item:j})=>[t("tr",null,[t("td",{colspan:i.length,class:"py-2"},[e(za,{rounded:"lg",border:""},{default:l(()=>[e(O,{density:"compact"},{default:l(()=>[a[18]||(a[18]=t("tbody",{class:"bg-surface-light"},[t("tr",null,[t("th",null,"Nama Sekolah"),t("th",null,"NPSN"),t("th",null,"Jenis Keluar"),t("th",null,"Tanggal Keluar"),t("th",null,"Daftarkan")])],-1)),t("tbody",null,[j.registrasi_pd.length?(d(!0),k(x,{key:0},X(j.registrasi_pd,c=>{var E,Q;return d(),k("tr",{key:c.registrasi_id},[t("td",Oa,u((E=c.sekolah)==null?void 0:E.nama),1),t("td",Ha,u((Q=c.sekolah)==null?void 0:Q.npsn),1),t("td",Ya,u(Y(c.jenis_keluar_id)),1),t("td",Za,u(c.tanggal_keluar),1),t("td",Qa,[e(N,{size:"small",onClick:ne=>J(j,c)},{default:l(()=>a[15]||(a[15]=[_("Daftarkan")])),_:2,__:[15]},1032,["onClick"])])])}),128)):(d(),k("tr",Wa,[a[17]||(a[17]=t("td",{class:"py-2 text-center",colspan:"4"}," Tidak data untuk ditampilan ",-1)),t("td",null,[e(N,{size:"small",onClick:c=>J(j,null)},{default:l(()=>a[16]||(a[16]=[_("Daftarkan")])),_:2,__:[16]},1032,["onClick"])])]))])]),_:2,__:[18]},1024)]),_:2},1024)],8,Ea)])]),_:1},8,["items"])):(d(),b(O,{key:0},{default:l(()=>[t("tbody",null,[t("tr",null,[a[10]||(a[10]=t("td",null,"Nama",-1)),t("td",null,u(s(r).nama),1)]),t("tr",null,[a[11]||(a[11]=t("td",null,"NIK",-1)),t("td",null,u(s(r).nik),1)]),t("tr",null,[a[12]||(a[12]=t("td",null,"NISN",-1)),t("td",null,u(s(r).nisn),1)]),t("tr",null,[a[13]||(a[13]=t("td",null,"Tempat, Tanggal Lahir",-1)),t("td",null,u(s(r).tempat_lahir)+", "+u(s(r).tanggal_lahir),1)]),t("tr",null,[a[14]||(a[14]=t("td",null,"Nama Ibu Kandung",-1)),t("td",null,u(s(r).nama_ibu_kandung),1)])])]),_:1}))],64)):(d(),b(U,{key:1},{default:l(()=>a[19]||(a[19]=[_(" NIK tidak ditemukan! ")])),_:1,__:[19]}))]),_:1}),s(r)&&!Array.isArray(s(r))?(d(),b(T,{key:0,class:"mt-4"},{default:l(()=>[e(L,{class:"pb-4"},{default:l(()=>[e(F,null,{default:l(()=>a[20]||(a[20]=[_("Riwayat Pendidikan Siswa")])),_:1,__:[20]})]),_:1}),e(K),e(O,null,{default:l(()=>[a[23]||(a[23]=t("thead",null,[t("tr",null,[t("th",null,"Nama Sekolah"),t("th",{class:"text-center"},"NPSN"),t("th",{class:"text-center"},"Jenis Keluar"),t("th",{class:"text-center"},"Tanggal Keluar"),t("th",{class:"text-center"},"Daftarkan")])],-1)),t("tbody",null,[s(r).registrasi_pd.length?(d(!0),k(x,{key:0},X(s(r).registrasi_pd,(i,j)=>(d(),k("tr",{key:i.registrasi_id},[t("td",null,[_(u(i.sekolah.nama)+" ",1),i.sekolah_id.toLowerCase()===s(n).sekolah_id?(d(),k("a",{key:0,href:"javascript:void(0)",onClick:c=>sa(i.registrasi_id)},[e(G,{icon:"tabler-clipboard-check"})],8,Ga)):S("",!0)]),t("td",Xa,u(i.sekolah.npsn),1),t("td",ae,u(Y(i.jenis_keluar_id)),1),t("td",ee,u(i.tanggal_keluar),1),t("td",le,[e(N,{size:"small",onClick:c=>J(s(r),i)},{default:l(()=>a[21]||(a[21]=[_("Daftarkan")])),_:2,__:[21]},1032,["onClick"])])]))),128)):(d(),k("tr",te,a[22]||(a[22]=[t("td",{colspan:"4",class:"py-4 text-center"}," Tidak ada data untuk ditampilkan ",-1)])))])]),_:1,__:[23]})]),_:1})):S("",!0),s(n).peserta_didik?(d(),b(T,{key:1,class:"mt-4"},{default:l(()=>[e(L,{class:"pb-4"},{default:l(()=>[e(F,null,{default:l(()=>a[24]||(a[24]=[_("Daftarkan Peserta Didik")])),_:1,__:[24]})]),_:1}),e(K),e(U,null,{default:l(()=>[s(y)?(d(),b(Ka,{key:0,color:"error"},{default:l(()=>[_(" Peserta Didik atas nama "+u(s(y).nama)+" telah terdaftar ",1),s(y).kelas?(d(),k("span",se,"di Rombongan Belajar "+u(s(y).kelas.nama),1)):S("",!0)]),_:1})):(d(),b(ra,{key:1,ref_key:"refVForm",ref:Z,onSubmit:$a(ea,["prevent"])},{default:l(()=>[e(w,null,{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[e(w,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>a[25]||(a[25]=[t("label",{class:"v-label text-body-2 text-high-emphasis",for:"jenis_pendaftaran_id"},"Jenis Pendaftaran ",-1)])),_:1,__:[25]}),e(m,{cols:"12",md:"9"},{default:l(()=>[e(I,{id:"jenis_ptk_id",modelValue:s(n).jenis_pendaftaran_id,"onUpdate:modelValue":a[1]||(a[1]=i=>s(n).jenis_pendaftaran_id=i),items:s(C).jenis_pendaftaran,placeholder:"== Pilih Jenis Pendaftaran ==","item-title":"nama","item-value":"jenis_pendaftaran_id",rules:["requiredValidator"in o?o.requiredValidator:s(R)],"error-messages":s(h).jenis_pendaftaran_id},null,8,["modelValue","items","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(w,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>a[26]||(a[26]=[t("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_masuk_sekolah"},"Tanggal Masuk Sekolah ",-1)])),_:1,__:[26]}),e(m,{cols:"12",md:"9"},{default:l(()=>[e(na,{id:"tanggal_masuk_sekolah",modelValue:s(n).tanggal_masuk_sekolah,"onUpdate:modelValue":a[2]||(a[2]=i=>s(n).tanggal_masuk_sekolah=i),rules:["requiredValidator"in o?o.requiredValidator:s(R)],placeholder:"== Pilih Tanggal ==",config:z},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(w,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>a[27]||(a[27]=[t("label",{class:"v-label text-body-2 text-high-emphasis",for:"nipd"},"Nomor Induk Siswa",-1)])),_:1,__:[27]}),e(m,{cols:"12",md:"9"},{default:l(()=>[e(D,{id:"nipd",modelValue:s(n).nipd,"onUpdate:modelValue":a[3]||(a[3]=i=>s(n).nipd=i),placeholder:"Nomor Induk Siswa","persistent-placeholder":"",rules:["requiredValidator"in o?o.requiredValidator:s(R)],"error-messages":s(h).nipd},null,8,["modelValue","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(w,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>a[28]||(a[28]=[t("label",{class:"v-label text-body-2 text-high-emphasis",for:"rombongan_belajar_id"},"Rombongan Belajar",-1)])),_:1,__:[28]}),e(m,{cols:"12",md:"9"},{default:l(()=>[e(I,{id:"rombongan_belajar_id",modelValue:s(n).rombongan_belajar_id,"onUpdate:modelValue":a[4]||(a[4]=i=>s(n).rombongan_belajar_id=i),items:s(C).rombongan_belajar,placeholder:"== Pilih Rombongan Belajar ==","item-title":"nama","item-value":"rombongan_belajar_id",rules:["requiredValidator"in o?o.requiredValidator:s(R)],"error-messages":s(h).rombongan_belajar_id},null,8,["modelValue","items","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(w,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3"}),e(m,{cols:"12",md:"9"},{default:l(()=>[e(N,{type:"submit",class:"me-4",disabled:s(g),loading:s(g)},{default:l(()=>a[29]||(a[29]=[_(" Simpan ")])),_:1,__:[29]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512))]),_:1})]),_:1})):S("",!0)],64)):S("",!0)],64)),e(oa,{isDialogVisible:s(q),"onUpdate:isDialogVisible":a[5]||(a[5]=i=>W(q)?q.value=i:null),"confirm-color":s(B).color,"confirm-title":s(B).title,"confirm-msg":s(B).text,onConfirm:ta},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])],64)}}};export{Ne as default};

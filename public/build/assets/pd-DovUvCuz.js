import{_ as ia,r as A,V as ra,a as da,i as ua}from"./VForm-C_yUAaJK.js";import{a5 as ma,a6 as _a,at as pa,ad as ka,aQ as fa,aR as ca,aS as ga,ai as ba,aD as va,ae as ya,a9 as ha,b as e,ak as Va,ab as ja,al as Ca,aJ as Pa,am as Da,aT as Sa,aU as xa,ac as Na,aV as Ta,E as wa,r as _,c as p,f as b,l as t,e as l,F as S,k as x,a2 as W,a as Aa,o as r,ay as Ra,s as k,a0 as R,Z as G,d as s,t as u,h as X,$ as qa}from"./main-BIyMnamV.js";import{_ as Ba}from"./AppAutocomplete-r3d5jP9J.js";import{_ as Ia}from"./AppTextField-C0moWJoY.js";import{u as $a}from"./useApi-CVSO3VSa.js";import{c as La,V as E}from"./VTable-DuMnKH4p.js";import{$ as O}from"./api-i2AGncdL.js";import{V as N,a as L,b as F}from"./VCard-Nqy554we.js";import{V as K}from"./VDivider-D-Ie8Ks6.js";import{V as U}from"./VCardText-COIMuknt.js";import{q as Fa}from"./VDataTable-Ci2kC3pg.js";import{V as Ka}from"./VAlert-Cr3we2Yi.js";import{V as T,a as m}from"./VRow-BE2MLt6Q.js";import"./VDialog-fpQUkQnT.js";import"./forwardRefs-By2WAY6g.js";import"./VImg-DoWARQkQ.js";import"./VTextField-CzfNW4f-.js";import"./VList-BFv_A_ek.js";import"./VAvatar-Ddge_L0Q.js";import"./VMenu-D27wMO7S.js";import"./VChip-CsG_i1lX.js";import"./index-CvOPxmL5.js";/* empty css              */const Ua=_a({color:String,...Ta(),...Na(),...xa(),...Sa(),...Da(),...Pa(),...Ca(),...ja(),...Va()},"VSheet"),Ma=ma()({name:"VSheet",props:Ua(),setup(f,M){let{slots:w}=M;const{themeClasses:q}=pa(f),{backgroundColorClasses:z,backgroundColorStyles:v}=ka(()=>f.color),{borderClasses:y}=fa(f),{dimensionStyles:h}=ca(f),{elevationClasses:c}=ga(f),{locationStyles:d}=ba(f),{positionClasses:D}=va(f),{roundedClasses:C}=ya(f);return ha(()=>e(f.tag,{class:["v-sheet",q.value,z.value,y.value,c.value,D.value,C.value,f.class],style:[v.value,h.value,d.value,f.style]},w)),{}}}),za={key:0,class:"ms-3"},Ja={class:"clamp-text text-white mb-0"},Ea=["colspan"],Oa={class:"py-2"},Ha={class:"py-2"},Ya={class:"py-2"},Za={class:"py-2"},Qa={class:"py-2"},Wa={key:1},Ga=["onClick"],Xa={class:"text-center"},ae={class:"text-center"},ee={class:"text-center"},le={key:1},te={key:0},xe={__name:"pd",setup(f){const M={dateFormat:"Y-m-d",locale:ua.Indonesian,altFormat:"j F Y",altInput:!0};wa(async()=>{await z()});const w=_(!1),q=_(),z=async()=>{var o,a;w.value=!0;try{let V=(await $a(La("/cek-sekolah"))).data.value;q.value=V.sekolah,n.value.sekolah_id=(o=V.sekolah)==null?void 0:o.sekolah_id,n.value.tahun_ajaran_id=(a=V.semester)==null?void 0:a.tahun_ajaran_id,C.value.jenis_pendaftaran=V.jenis_pendaftaran}catch(P){console.error(P)}finally{w.value=!1}},v=_(),y=_(),h=_({jenis_pendaftaran_id:null,tanggal_masuk_sekolah:null,nipd:null,rombongan_belajar_id:null}),c=_(!1),d=_(),D=_(!1),C=_({jenis_pendaftaran:[],rombongan_belajar:[]}),aa=async()=>{h.value.nik=void 0,d.value=void 0,n.value.peserta_didik=void 0,D.value=!1,y.value=void 0,v.value?(c.value=!0,await O("/cari-data",{method:"POST",body:{data:"siswa",nik:v.value,sekolah_id:n.value.sekolah_id},async onResponse({response:o}){let a=o._data;D.value=!0,y.value=a.pd,d.value=a.result,Array.isArray(d.value)||(n.value.peserta_didik=d.value),C.value.rombongan_belajar=a.rombongan_belajar,n.value.ptk=d.value,c.value=!1}})):h.value.nik="NIK tidak boleh kosong"},H=o=>{var a={1:"Lulus",2:"Mutasi",3:"Dikeluarkan",4:"Mengundurkan diri",5:"Putus Sekolah",6:"Wafat",7:"Hilang",8:"Alih Fungsi",9:"Pensiun",Z:"Lainnya"};if(o)return a[o]},Y=_(),n=_({data:"siswa",sekolah_id:null,nik:null,registrasi_id:null,jenis_pendaftaran_id:null,tanggal_masuk_sekolah:null,nipd:null,a_pernah_paud:null,a_pernah_tk:null,sekolah_asal:null,id_hobby:null,id_cita:null,rombongan_belajar_id:null,peserta_didik:null}),ea=()=>{var o;(o=Y.value)==null||o.validate().then(({valid:a})=>{a&&la()})},B=_(!1),I=_({color:"",title:"",text:""}),la=async()=>{c.value=!0,await O("/daftar",{method:"POST",body:n.value,async onResponse({response:o}){let a=o._data;c.value=!1,B.value=!0,I.value=a}})},ta=async()=>{n.value.registrasi_id=null,n.value.jenis_pendaftaran_id=null,n.value.tanggal_masuk_sekolah=null,n.value.nipd=null,n.value.a_pernah_paud=null,n.value.a_pernah_tk=null,n.value.sekolah_asal=null,n.value.id_hobby=null,n.value.id_cita=null,n.value.rombongan_belajar_id=null,n.value.peserta_didik=null,v.value=void 0,h.value={jenis_pendaftaran_id:null,tanggal_masuk_sekolah:null,nipd:null,rombongan_belajar_id:null},d.value=[],D.value=!1,C.value.rombongan_belajar=[]},Z=async(o,a)=>{a&&(n.value.a_pernah_paud=a.a_pernah_paud,n.value.a_pernah_tk=a.a_pernah_tk,n.value.sekolah_asal=a.sekolah.nama,n.value.id_hobby=a.id_hobby,n.value.id_cita=a.id_cita),await O("/cek-pd",{method:"POST",body:{sekolah_id:n.value.sekolah_id,peserta_didik_id:o.peserta_didik_id,nik:v.value},async onResponse({response:P}){const V=P._data;y.value=V.pd,n.value.peserta_didik=d.value.find($=>$.peserta_didik_id===o.peserta_didik_id)}})},sa=o=>{console.log(o)};return(o,a)=>{const P=Ia,V=Aa("RouterLink"),$=Ba,na=da,oa=ia;return r(),p(S,null,[t(w)?(r(),b(N,{key:0,class:"text-center"},{default:l(()=>[e(Ra,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):(r(),p(S,{key:1},[t(q)?(r(),b(N,{key:0},{default:l(()=>[e(L,{class:"pb-4"},{default:l(()=>[e(F,null,{default:l(()=>a[6]||(a[6]=[k("Tarik PD")])),_:1,__:[6]})]),_:1}),e(K),e(U,null,{default:l(()=>[e(P,{modelValue:t(v),"onUpdate:modelValue":a[0]||(a[0]=i=>W(v)?v.value=i:null),required:"",clearable:"",placeholder:"Masukkan NIK",type:"text",rules:["requiredValidator"in o?o.requiredValidator:t(A)],"error-messages":t(h).nik},{append:l(()=>[e(R,{icon:o.$vuetify.display.smAndDown,onClick:aa,disabled:t(c),loading:t(c)},{default:l(()=>[e(G,{icon:"tabler-search",color:"#fff",size:"22"}),o.$vuetify.display.mdAndUp?(r(),p("span",za,"Cari...")):x("",!0)]),_:1},8,["icon","disabled","loading"])]),_:1},8,["modelValue","rules","error-messages"])]),_:1})]),_:1})):(r(),b(N,{key:1,color:"#007BB6"},{default:l(()=>[e(U,null,{default:l(()=>[s("p",Ja,[a[8]||(a[8]=k(" Data Sekolah tidak ditemukan. Silahkan Simpan Data Sekolah terlebih dahulu ")),e(V,{class:"text-success ms-1",to:{name:"root"}},{default:l(()=>a[7]||(a[7]=[k(" disini ")])),_:1,__:[7]})])]),_:1})]),_:1})),t(D)?(r(),p(S,{key:2},[e(N,{class:"mt-4"},{default:l(()=>[e(L,{class:"pb-4"},{default:l(()=>[e(F,null,{default:l(()=>a[9]||(a[9]=[k("Hasil Pencarian")])),_:1,__:[9]})]),_:1}),e(K),t(d)?(r(),p(S,{key:0},[Array.isArray(t(d))?(r(),b(Fa,{key:1,headers:[{title:"Nama",key:"nama"},{title:"NIK",key:"nik"},{title:"NISN",key:"nisn"},{title:"Tempat, Tanggal Lahir",key:"tempat"},{title:"Nama Ibu Kandung",key:"nama_ibu_kandung"},{title:"Detil",key:"data-table-expand",align:"end"}],items:t(d),"item-value":"peserta_didik_id","show-expand":""},{"item.tempat":l(({item:i})=>[k(u(i.tempat_lahir)+", "+u(i.tanggal_lahir),1)]),"item.data-table-expand":l(({internalItem:i,isExpanded:j,toggleExpand:g})=>[e(R,{"append-icon":j(i)?"tabler-chevron-up":"tabler-chevron-down",text:j(i)?"Tutup":"Detil",class:"text-none",color:"medium-emphasis",size:"small",variant:"text",width:"105",border:"",slim:"",onClick:J=>g(i)},null,8,["append-icon","text","onClick"])]),"expanded-row":l(({columns:i,item:j})=>[s("tr",null,[s("td",{colspan:i.length,class:"py-2"},[e(Ma,{rounded:"lg",border:""},{default:l(()=>[e(E,{density:"compact"},{default:l(()=>[a[18]||(a[18]=s("tbody",{class:"bg-surface-light"},[s("tr",null,[s("th",null,"Nama Sekolah"),s("th",null,"NPSN"),s("th",null,"Jenis Keluar"),s("th",null,"Tanggal Keluar"),s("th",null,"Daftarkan")])],-1)),s("tbody",null,[j.registrasi_pd.length?(r(!0),p(S,{key:0},X(j.registrasi_pd,g=>{var J,Q;return r(),p("tr",{key:g.registrasi_id},[s("td",Oa,u((J=g.sekolah)==null?void 0:J.nama),1),s("td",Ha,u((Q=g.sekolah)==null?void 0:Q.npsn),1),s("td",Ya,u(H(g.jenis_keluar_id)),1),s("td",Za,u(g.tanggal_keluar),1),s("td",Qa,[e(R,{size:"small",onClick:se=>Z(j,g)},{default:l(()=>a[15]||(a[15]=[k("Daftarkan")])),_:2,__:[15]},1032,["onClick"])])])}),128)):(r(),p("tr",Wa,[a[17]||(a[17]=s("td",{class:"py-2 text-center",colspan:"4"}," Tidak data untuk ditampilan ",-1)),s("td",null,[e(R,{size:"small",onClick:g=>Z(j,null)},{default:l(()=>a[16]||(a[16]=[k("Daftarkan")])),_:2,__:[16]},1032,["onClick"])])]))])]),_:2,__:[18]},1024)]),_:2},1024)],8,Ea)])]),_:1},8,["items"])):(r(),b(E,{key:0},{default:l(()=>[s("tbody",null,[s("tr",null,[a[10]||(a[10]=s("td",null,"Nama",-1)),s("td",null,u(t(d).nama),1)]),s("tr",null,[a[11]||(a[11]=s("td",null,"NIK",-1)),s("td",null,u(t(d).nik),1)]),s("tr",null,[a[12]||(a[12]=s("td",null,"NISN",-1)),s("td",null,u(t(d).nisn),1)]),s("tr",null,[a[13]||(a[13]=s("td",null,"Tempat, Tanggal Lahir",-1)),s("td",null,u(t(d).tempat_lahir)+", "+u(t(d).tanggal_lahir),1)]),s("tr",null,[a[14]||(a[14]=s("td",null,"Nama Ibu Kandung",-1)),s("td",null,u(t(d).nama_ibu_kandung),1)])])]),_:1}))],64)):(r(),b(U,{key:1},{default:l(()=>a[19]||(a[19]=[k(" NIK tidak ditemukan! ")])),_:1,__:[19]}))]),_:1}),t(d)&&!Array.isArray(t(d))?(r(),b(N,{key:0,class:"mt-4"},{default:l(()=>[e(L,{class:"pb-4"},{default:l(()=>[e(F,null,{default:l(()=>a[20]||(a[20]=[k("Riwayat Pendidikan Siswa")])),_:1,__:[20]})]),_:1}),e(K),e(E,null,{default:l(()=>[a[22]||(a[22]=s("thead",null,[s("tr",null,[s("th",null,"Nama Sekolah"),s("th",{class:"text-center"},"NPSN"),s("th",{class:"text-center"},"Jenis Keluar"),s("th",{class:"text-center"},"Tanggal Keluar")])],-1)),s("tbody",null,[t(d).registrasi_pd.length?(r(!0),p(S,{key:0},X(t(d).registrasi_pd,(i,j)=>(r(),p("tr",{key:i.registrasi_id},[s("td",null,[k(u(i.sekolah.nama)+" ",1),i.sekolah_id.toLowerCase()===t(n).sekolah_id?(r(),p("a",{key:0,href:"javascript:void(0)",onClick:g=>sa(i.registrasi_id)},[e(G,{icon:"tabler-clipboard-check"})],8,Ga)):x("",!0)]),s("td",Xa,u(i.sekolah.npsn),1),s("td",ae,u(H(i.jenis_keluar_id)),1),s("td",ee,u(i.tanggal_keluar),1)]))),128)):(r(),p("tr",le,a[21]||(a[21]=[s("td",{colspan:"4",class:"py-4 text-center"}," Tidak ada data untuk ditampilkan ",-1)])))])]),_:1,__:[22]})]),_:1})):x("",!0),t(n).peserta_didik?(r(),b(N,{key:1,class:"mt-4"},{default:l(()=>[e(L,{class:"pb-4"},{default:l(()=>[e(F,null,{default:l(()=>a[23]||(a[23]=[k("Daftarkan Peserta Didik")])),_:1,__:[23]})]),_:1}),e(K),e(U,null,{default:l(()=>[t(y)?(r(),b(Ka,{key:0,color:"error"},{default:l(()=>[k(" Peserta Didik atas nama "+u(t(y).nama)+" telah terdaftar ",1),t(y).kelas?(r(),p("span",te,"di Rombongan Belajar "+u(t(y).kelas.nama),1)):x("",!0)]),_:1})):(r(),b(ra,{key:1,ref_key:"refVForm",ref:Y,onSubmit:qa(ea,["prevent"])},{default:l(()=>[e(T,null,{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[e(T,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>a[24]||(a[24]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"jenis_pendaftaran_id"},"Jenis Pendaftaran ",-1)])),_:1,__:[24]}),e(m,{cols:"12",md:"9"},{default:l(()=>[e($,{id:"jenis_ptk_id",modelValue:t(n).jenis_pendaftaran_id,"onUpdate:modelValue":a[1]||(a[1]=i=>t(n).jenis_pendaftaran_id=i),items:t(C).jenis_pendaftaran,placeholder:"== Pilih Jenis Pendaftaran ==","item-title":"nama","item-value":"jenis_pendaftaran_id",rules:["requiredValidator"in o?o.requiredValidator:t(A)],"error-messages":t(h).jenis_pendaftaran_id},null,8,["modelValue","items","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(T,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>a[25]||(a[25]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_masuk_sekolah"},"Tanggal Masuk Sekolah ",-1)])),_:1,__:[25]}),e(m,{cols:"12",md:"9"},{default:l(()=>[e(na,{id:"tanggal_masuk_sekolah",modelValue:t(n).tanggal_masuk_sekolah,"onUpdate:modelValue":a[2]||(a[2]=i=>t(n).tanggal_masuk_sekolah=i),rules:["requiredValidator"in o?o.requiredValidator:t(A)],placeholder:"== Pilih Tanggal ==",config:M},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(T,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>a[26]||(a[26]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"nipd"},"Nomor Induk Siswa",-1)])),_:1,__:[26]}),e(m,{cols:"12",md:"9"},{default:l(()=>[e(P,{id:"nipd",modelValue:t(n).nipd,"onUpdate:modelValue":a[3]||(a[3]=i=>t(n).nipd=i),placeholder:"Nomor Induk Siswa","persistent-placeholder":"",rules:["requiredValidator"in o?o.requiredValidator:t(A)],"error-messages":t(h).nipd},null,8,["modelValue","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(T,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>a[27]||(a[27]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"rombongan_belajar_id"},"Rombongan Belajar",-1)])),_:1,__:[27]}),e(m,{cols:"12",md:"9"},{default:l(()=>[e($,{id:"rombongan_belajar_id",modelValue:t(n).rombongan_belajar_id,"onUpdate:modelValue":a[4]||(a[4]=i=>t(n).rombongan_belajar_id=i),items:t(C).rombongan_belajar,placeholder:"== Pilih Rombongan Belajar ==","item-title":"nama","item-value":"rombongan_belajar_id",rules:["requiredValidator"in o?o.requiredValidator:t(A)],"error-messages":t(h).rombongan_belajar_id},null,8,["modelValue","items","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(T,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"3"}),e(m,{cols:"12",md:"9"},{default:l(()=>[e(R,{type:"submit",class:"me-4",disabled:t(c),loading:t(c)},{default:l(()=>a[28]||(a[28]=[k(" Simpan ")])),_:1,__:[28]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512))]),_:1})]),_:1})):x("",!0)],64)):x("",!0)],64)),e(oa,{isDialogVisible:t(B),"onUpdate:isDialogVisible":a[5]||(a[5]=i=>W(B)?B.value=i:null),"confirm-color":t(I).color,"confirm-title":t(I).title,"confirm-msg":t(I).text,onConfirm:ta},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])],64)}}};export{xe as default};

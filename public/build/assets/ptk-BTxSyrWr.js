import{_ as ia,r as R,V as ra,a as ma,i as _a}from"./VForm-BEHnVp8P.js";import{a5 as ea,a6 as ta,a9 as la,b as e,p as J,a8 as fa,X as pa,a7 as ga,bk as ka,an as H,aa as ca,F as I,E as ba,r as _,c as v,f as C,l,e as t,k as O,a2 as Z,a as Va,o as m,ay as va,s as y,a0 as W,Z as ya,d as s,t as f,h as ja,$ as Ta}from"./main-D5YvgCjt.js";import{_ as Pa}from"./AppAutocomplete-DoZlIOra.js";import{_ as ha}from"./AppTextField-C5NtTJnW.js";import{u as xa}from"./useApi-obuZURhq.js";import{e as E,f as Ia,g as Sa,h as Da,c as Ra,V as X}from"./VTable-CYQqX1ac.js";import{$ as G}from"./api-YWKl5vSZ.js";import{V as N,a as $,b as U}from"./VCard-R3gxVz52.js";import{V as w}from"./VDivider-CumrEmxb.js";import{V as F}from"./VCardText-TAbZaq51.js";import{V as P,a as d}from"./VRow-dTmx3pU9.js";import{a as Q,m as Ca,V as Na}from"./VTextField-FnbS8rHt.js";import"./VDialog-ZVkaLbsc.js";import"./forwardRefs-CWJzJQtr.js";import"./VImg-cwMsIaom.js";import"./VList-DkSMlIoX.js";import"./VAvatar-BOCiSy9V.js";import"./VMenu-DgYIRoKL.js";import"./VChip-BuoSjUEw.js";import"./index-CvOPxmL5.js";/* empty css              */const Ka=ta({...Ia({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),aa=ea()({name:"VRadio",props:Ka(),setup(i,S){let{slots:h}=S;return la(()=>{const g=E.filterProps(i);return e(E,J(g,{class:["v-radio",i.class],style:i.style,type:"radio"}),h)}),{}}}),qa=ta({height:{type:[Number,String],default:"auto"},...Ca(),...ca(Sa(),["multiple"]),trueIcon:{type:H,default:"$radioOn"},falseIcon:{type:H,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Aa=ea()({name:"VRadioGroup",inheritAttrs:!1,props:qa(),emits:{"update:modelValue":i=>!0},setup(i,S){let{attrs:h,slots:g}=S;const L=fa(),x=pa(()=>i.id||`radio-group-${L}`),D=ga(i,"modelValue");return la(()=>{const[j,k]=ka(h),p=Q.filterProps(i),r=E.filterProps(i),c=g.label?g.label({label:i.label,props:{for:x.value}}):i.label;return e(Q,J({class:["v-radio-group",i.class],style:i.style},j,p,{modelValue:D.value,"onUpdate:modelValue":T=>D.value=T,id:x.value}),{...g,default:T=>{let{id:b,messagesId:B,isDisabled:M,isReadonly:K}=T;return e(I,null,[c&&e(Na,{id:b.value},{default:()=>[c]}),e(Da,J(r,{id:b.value,"aria-describedby":B.value,defaultsTarget:"VRadio",trueIcon:i.trueIcon,falseIcon:i.falseIcon,type:i.type,disabled:M.value,readonly:K.value,"aria-labelledby":c?b.value:void 0,multiple:!1},k,{modelValue:D.value,"onUpdate:modelValue":u=>D.value=u}),g)])}})}),{}}}),$a={key:0,class:"ms-3"},Ua={class:"clamp-text text-white mb-0"},wa={class:"text-center"},Fa={class:"text-center"},La={class:"text-center"},Ba={class:"text-center"},Ma={key:1},re={__name:"ptk",setup(i){const S={dateFormat:"Y-m-d",locale:_a.Indonesian,altFormat:"j F Y",altInput:!0};ba(async()=>{await L()});const h=_(!1),g=_(),L=async()=>{var n;h.value=!0;try{let V=(await xa(Ra("/cek-sekolah"))).data.value;g.value=V.sekolah,u.value.sekolah_id=(n=V.sekolah)==null?void 0:n.sekolah_id,u.value.tahun_ajaran_id=V.semester.tahun_ajaran_id,b.value.jenis_ptk=V.jenis_ptk}catch(a){console.error(a)}finally{h.value=!1}},x=_(!1),D=async n=>{x.value=!0,await G("/get-jabatan",{method:"POST",body:{jenis_ptk_id:n},async onResponse({response:a}){let V=a._data;x.value=!1,u.value.jabatan_ptk_id=null,b.value.jabatan_ptk=V}})},j=_(),k=_({nik:void 0,tahun_ajaran_id:void 0,ptk_terdaftar_id:void 0,sekolah_id:void 0,jenis_ptk_id:void 0,jabatan_ptk_id:void 0,nomor_surat_tugas:void 0,tanggal_surat_tugas:void 0,tmt_tugas:void 0,ptk_induk:void 0}),p=_(!1),r=_(),c=_(),T=_(!1),b=_({jenis_ptk:[],jabatan_ptk:[]}),B=async()=>{k.value.nik=void 0,r.value=void 0,c.value=void 0,T.value=!1,j.value?(p.value=!0,await G("/cari-data",{method:"POST",body:{data:"guru",nik:j.value,sekolah_id:u.value.sekolah_id},async onResponse({response:n}){let a=n._data;T.value=!0,r.value=a.result,c.value=a.ptk,u.value.ptk=r.value,p.value=!1}})):k.value.nik="NIK tidak boleh kosong"},M=n=>{var a={1:"Lulus",2:"Mutasi",3:"Dikeluarkan",4:"Mengundurkan diri",5:"Putus Sekolah",6:"Wafat",7:"Hilang",8:"Alih Fungsi",9:"Pensiun",Z:"Lainnya"};if(n)return a[n]},K=_(),u=_({data:"guru",tahun_ajaran_id:null,ptk_terdaftar_id:null,sekolah_id:null,jenis_ptk_id:null,jabatan_ptk_id:null,nomor_surat_tugas:null,tanggal_surat_tugas:null,tmt_tugas:null,ptk_induk:null,ptk:null}),sa=()=>{var n;(n=K.value)==null||n.validate().then(({valid:a})=>{a&&na()})},q=_(!1),A=_({color:"",title:"",text:""}),na=async()=>{p.value=!0,console.log("submit"),await G("/daftar",{method:"POST",body:u.value,async onResponse({response:n}){let a=n._data;p.value=!1,q.value=!0,A.value=a}})},ua=async()=>{u.value.ptk_terdaftar_id=null,u.value.jenis_ptk_id=null,u.value.jabatan_ptk_id=null,u.value.nomor_surat_tugas=null,u.value.tanggal_surat_tugas=null,u.value.tmt_tugas=null,u.value.ptk_induk=null,c.value=null,j.value=void 0,k.value={nik:void 0,tahun_ajaran_id:void 0,ptk_terdaftar_id:void 0,sekolah_id:void 0,jenis_ptk_id:void 0,jabatan_ptk_id:void 0,nomor_surat_tugas:void 0,tanggal_surat_tugas:void 0,tmt_tugas:void 0,ptk_induk:void 0},r.value=void 0,c.value=void 0,T.value=!1,b.value.jabatan_ptk=[]};return(n,a)=>{const V=ha,oa=Va("RouterLink"),Y=Pa,z=ma,da=ia;return m(),v(I,null,[l(h)?(m(),C(N,{key:0,class:"text-center"},{default:t(()=>[e(va,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):(m(),v(I,{key:1},[l(g)?(m(),C(N,{key:0},{default:t(()=>[e($,{class:"pb-4"},{default:t(()=>[e(U,null,{default:t(()=>a[8]||(a[8]=[y("Tarik PTK")])),_:1,__:[8]})]),_:1}),e(w),e(F,null,{default:t(()=>[e(V,{modelValue:l(j),"onUpdate:modelValue":a[0]||(a[0]=o=>Z(j)?j.value=o:null),required:"",clearable:"",placeholder:"Masukkan NIK",type:"text",rules:["requiredValidator"in n?n.requiredValidator:l(R)],"error-messages":l(k).nik},{append:t(()=>[e(W,{icon:n.$vuetify.display.smAndDown,onClick:B,disabled:l(p),loading:l(p)},{default:t(()=>[e(ya,{icon:"tabler-search",color:"#fff",size:"22"}),n.$vuetify.display.mdAndUp?(m(),v("span",$a,"Cari...")):O("",!0)]),_:1},8,["icon","disabled","loading"])]),_:1},8,["modelValue","rules","error-messages"])]),_:1})]),_:1})):(m(),C(N,{key:1,color:"#007BB6"},{default:t(()=>[e(F,null,{default:t(()=>[s("p",Ua,[a[10]||(a[10]=y(" Data Sekolah tidak ditemukan. Silahkan Simpan Data Sekolah terlebih dahulu ")),e(oa,{class:"text-success ms-1",to:{name:"root"}},{default:t(()=>a[9]||(a[9]=[y(" disini ")])),_:1,__:[9]})])]),_:1})]),_:1})),l(T)?(m(),v(I,{key:2},[e(N,{class:"mt-4"},{default:t(()=>[e($,{class:"pb-4"},{default:t(()=>[e(U,null,{default:t(()=>a[11]||(a[11]=[y("Hasil Pencarian")])),_:1,__:[11]})]),_:1}),e(w),l(r)?(m(),C(X,{key:0},{default:t(()=>[s("tbody",null,[s("tr",null,[a[12]||(a[12]=s("td",null,"Nama",-1)),s("td",null,f(l(r).nama),1)]),s("tr",null,[a[13]||(a[13]=s("td",null,"NIK",-1)),s("td",null,f(l(r).nik),1)]),s("tr",null,[a[14]||(a[14]=s("td",null,"NUPTK",-1)),s("td",null,f(l(r).nuptk),1)]),s("tr",null,[a[15]||(a[15]=s("td",null,"Email",-1)),s("td",null,f(l(r).email),1)]),s("tr",null,[a[16]||(a[16]=s("td",null,"Tempat, Tanggal Lahir",-1)),s("td",null,f(l(r).tempat_lahir)+", "+f(l(r).tanggal_lahir),1)]),s("tr",null,[a[17]||(a[17]=s("td",null,"Nama Ibu Kandung",-1)),s("td",null,f(l(r).nama_ibu_kandung),1)])])]),_:1})):(m(),C(F,{key:1},{default:t(()=>a[18]||(a[18]=[y(" NIK tidak ditemukan! ")])),_:1,__:[18]}))]),_:1}),l(r)?(m(),v(I,{key:0},[e(N,{class:"mt-4"},{default:t(()=>[e($,{class:"pb-4"},{default:t(()=>[e(U,null,{default:t(()=>a[19]||(a[19]=[y("Riwayat PTK Terdaftar")])),_:1,__:[19]})]),_:1}),e(w),e(X,null,{default:t(()=>[a[21]||(a[21]=s("thead",null,[s("tr",null,[s("th",{class:"text-center"},"Nama Sekolah"),s("th",{class:"text-center"},"NPSN"),s("th",{class:"text-center"},"Tahun"),s("th",{class:"text-center"},"Jenis Keluar"),s("th",{class:"text-center"},"Tanggal Keluar")])],-1)),s("tbody",null,[l(r).terdaftar.length?(m(!0),v(I,{key:0},ja(l(r).terdaftar,o=>(m(),v("tr",{key:o.ptk_terdaftar_id},[s("td",null,f(o.sekolah.nama),1),s("td",wa,f(o.sekolah.npsn),1),s("td",Fa,f(o.tahun_ajaran_id),1),s("td",La,f(M(o.jenis_keluar_id)),1),s("td",Ba,f(o.tgl_ptk_keluar),1)]))),128)):(m(),v("tr",Ma,a[20]||(a[20]=[s("td",{class:"text-center",colspan:"5"}," Tidak ada data untuk ditampilkan ",-1)])))])]),_:1,__:[21]})]),_:1}),e(N,{class:"mt-4"},{default:t(()=>[e($,{class:"pb-4"},{default:t(()=>[e(U,null,{default:t(()=>a[22]||(a[22]=[y("Registrasi PTK")])),_:1,__:[22]})]),_:1}),e(w),e(F,null,{default:t(()=>[l(c)?(m(),v(I,{key:0},[y(" PTK Telah Terdaftar ")],64)):(m(),C(ra,{key:1,ref_key:"refVForm",ref:K,onSubmit:Ta(sa,["prevent"])},{default:t(()=>[e(P,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[23]||(a[23]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"jenis_ptk_id"},"Jenis PTK ",-1)])),_:1,__:[23]}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(Y,{id:"jenis_ptk_id",modelValue:l(u).jenis_ptk_id,"onUpdate:modelValue":[a[1]||(a[1]=o=>l(u).jenis_ptk_id=o),D],items:l(b).jenis_ptk,placeholder:"== Pilih Jenis PTK ==","item-title":"jenis_ptk","item-value":"jenis_ptk_id",rules:["requiredValidator"in n?n.requiredValidator:l(R)],"error-messages":l(k).jenis_ptk_id},null,8,["modelValue","items","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[24]||(a[24]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"jabatan_ptk_id"},"Jabatan PTK",-1)])),_:1,__:[24]}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(Y,{id:"jabatan_ptk_id",modelValue:l(u).jabatan_ptk_id,"onUpdate:modelValue":a[2]||(a[2]=o=>l(u).jabatan_ptk_id=o),items:l(b).jabatan_ptk,placeholder:"== Pilih Jabatan PTK ==","item-title":"jabatan_ptk","item-value":"jabatan_ptk_id",disabled:l(x),loading:l(x),rules:["requiredValidator"in n?n.requiredValidator:l(R)],"error-messages":l(k).jabatan_ptk_id},null,8,["modelValue","items","disabled","loading","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[25]||(a[25]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"nomor_surat_tugas"},"Nomor Surat Tugas",-1)])),_:1,__:[25]}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(V,{id:"nomor_surat_tugas",modelValue:l(u).nomor_surat_tugas,"onUpdate:modelValue":a[3]||(a[3]=o=>l(u).nomor_surat_tugas=o),placeholder:"Nomor Surat Tugas","persistent-placeholder":"",rules:["requiredValidator"in n?n.requiredValidator:l(R)],"error-messages":l(k).nomor_surat_tugas},null,8,["modelValue","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[26]||(a[26]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_surat_tugas"},"Tanggal Surat Tugas ",-1)])),_:1,__:[26]}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(z,{id:"tanggal_surat_tugas",modelValue:l(u).tanggal_surat_tugas,"onUpdate:modelValue":a[4]||(a[4]=o=>l(u).tanggal_surat_tugas=o),rules:["requiredValidator"in n?n.requiredValidator:l(R)],placeholder:"== Pilih Tanggal ==",config:S},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[27]||(a[27]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"tmt_tugas"},"TMT Tugas ",-1)])),_:1,__:[27]}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(z,{id:"tmt_tugas",modelValue:l(u).tmt_tugas,"onUpdate:modelValue":a[5]||(a[5]=o=>l(u).tmt_tugas=o),rules:["requiredValidator"in n?n.requiredValidator:l(R)],placeholder:"== Pilih Tanggal ==",config:S},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[28]||(a[28]=[s("label",{class:"v-label text-body-2 text-high-emphasis",for:"nomor_surat_tugas"},"PTK Induk",-1)])),_:1,__:[28]}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(Aa,{modelValue:l(u).ptk_induk,"onUpdate:modelValue":a[6]||(a[6]=o=>l(u).ptk_induk=o)},{default:t(()=>[e(aa,{label:"Ya",value:1}),e(aa,{label:"Tidak",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(d,{cols:"12",md:"3"}),e(d,{cols:"12",md:"9"},{default:t(()=>[e(W,{type:"submit",class:"me-4",disabled:l(p),loading:l(p)},{default:t(()=>a[29]||(a[29]=[y(" Simpan ")])),_:1,__:[29]},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512))]),_:1})]),_:1})],64)):O("",!0)],64)):O("",!0)],64)),e(da,{isDialogVisible:l(q),"onUpdate:isDialogVisible":a[7]||(a[7]=o=>Z(q)?q.value=o:null),"confirm-color":l(A).color,"confirm-title":l(A).title,"confirm-msg":l(A).text,onConfirm:ua},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])],64)}}};export{re as default};

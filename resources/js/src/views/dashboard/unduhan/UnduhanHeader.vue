<template>
  <b-card no-body>
    <b-card-body>
      <b-tabs card>
        <b-tab active>
          <template #title>
            <b-icon-lightning></b-icon-lightning> INSTALLER
          </template>
          <b-card-text>
            <b-row>
              <b-col col md="8">
                <h2>Installer Aplikasi e-Rapor SMK</h2>
                <p>Versi Aplikasi : 6.0.0</p>
                <p><strong>Dirilis pada tanggal 30 November 2022</strong></p>
                <b-button variant="success"
                  href="https://drive.google.com/file/d/1DqLffh_6eZkyA-_rvQ7s3zasLZOaSs4F/view?usp=share_link"
                  target="_blank"><b-icon-download></b-icon-download> Unduh Aplikasi</b-button>
              </b-col>
              <b-col col md="4">
                <img src="http://erapor.ditpsmk.net/img/logo-big.png" alt="Aplikasi e-Rapor SMK Versi 6.0.0"
                  class="img-fluid">
              </b-col>
            </b-row>
          </b-card-text>
        </b-tab>
        <b-tab>
          <template #title>
            <b-icon-folder2></b-icon-folder2> DOKUMENTASI
          </template>
          <b-card-text>
            <h3>Panduan Penggunaan Aplikasi e-Rapor SMK</h3>
            <p><a href="https://drive.google.com/file/d/1lqQl_kmRSqWZydEse634nEa6gVY5npGb/view?usp=share_link"
                target="blank"><b-icon-book></b-icon-book> Panduan Penggunaan Aplikasi e-Rapor SMK</a></p>
            <h3>Panduan &amp; Pedoman Kurikulum</h3>
            <p><a href="https://drive.google.com/file/d/1VWJ3MGrc9q12z3VOAfTO8WwxbGuaw_WN/view?usp=share_link"
                target="blank"><b-icon-book></b-icon-book> Panduan Pembelajaran dan Asesmen Kurikulum Merdeka</a></p>
            <p><a href="https://drive.google.com/file/d/104vUWWHkAaXit-nxiTXDLP4ktM7zJX6K/view?usp=sharing"
                target="blank"><b-icon-book></b-icon-book> Panduan Penguatan Projek Profil Pelajar Pancasila</a></p>
            <p><a href="https://drive.google.com/file/d/1uCrllxH1uPdGp1A0AenWiGkdvA0f1isV/view?usp=share_link"
                target="blank"><b-icon-book></b-icon-book> Dimensi Elemen Subelemen Profil Pelajar Pancasila pada
                Kurikulum Merdeka</a></p>
            <p><a href="https://drive.google.com/file/d/19tP2LIclhq0a5phMsBnlVQuzdZynPeRV/view?usp=share_link"
                target="blank"><b-icon-book></b-icon-book> Pedoman Pembelajaran dan Asesmen Kurikulum 2013</a></p>
            <h3>Tautan tentang Kurikulum Merdeka pada SMK</h3>
            <p><a href="https://bit.ly/PP57SNP" target="blank"><b-icon-book></b-icon-book> Standar Nasional
                Pendidikan</a></p>
            <p><a href="https://bit.ly/permendikbudristek5SKL" target="blank"><b-icon-book></b-icon-book> Standar
                Kompetensi Lulusan</a></p>
            <p><a href="https://bit.ly/permedikbudristek7StandarIsi" target="blank"><b-icon-book></b-icon-book> Standar
                Isi</a></p>
            <p><a href="https://bit.ly/permendikbudristek16StandarProses" target="blank"><b-icon-book></b-icon-book>
                Standar Proses</a></p>
            <p><a href="https://bit.ly/permendikbudristek21StandarPenilaian" target="blank"><b-icon-book></b-icon-book>
                Standar Penilaian</a></p>
            <p><a href="https://bit.ly/PerubahanKepmendikbudristek56" target="blank"><b-icon-book></b-icon-book>
                Spektrum
                Keahlian, Struktur Kurikulum, dan Linieritas</a></p>
            <p><a href="https://bit.ly/SKKaBSKAP024KonsentrasiKeahlian" target="blank"><b-icon-book></b-icon-book>
                Konsentrasi Keahlian</a></p>
            <p><a href="https://bit.ly/SKKaBSKAP033CapaianPembelajaran" target="blank"><b-icon-book></b-icon-book>
                Capaian Pembelajaran</a></p>
            <p><a href="https://bit.ly/panduanPembelajarandanAsesmen" target="blank"><b-icon-book></b-icon-book> Panduan
                Pembelajaran dan Asesmen</a></p>
            <p><a href="https://bit.ly/PanduanPengembanganKOS" target="blank"><b-icon-book></b-icon-book> Panduan
                Pengembangan KOS</a></p>
            <p><a href="https://bit.ly/PanduanP5" target="blank"><b-icon-book></b-icon-book> Panduan P5</a></p>
            <p><a href="https://bit.ly/kepKaBSKAP9DimensiElemenSubelemenProfilPelajarPancasila" target="blank"><i
                  class="fa fa-book"></i> Dimensi, Elemen, Subelemen Profil Pelajar Pancasila</a></p>
            <p><a href="https://bit.ly/BukusakuKurikulumMerdeka" target="blank"><b-icon-book></b-icon-book> Buku Saku
                Kurikulum Merdeka</a></p>
            <p><a href="https://bit.ly/platformMerdekaMengajar" target="blank"><b-icon-book></b-icon-book> Platform
                Merdeka Mengajar</a></p>
            <p><a href="https://bit.ly/PusatPenguatanKarakter" target="blank"><b-icon-book></b-icon-book> Pusat
                Penguatan
                Karakter</a></p>
            <p><a href="https://bit.ly/SKKaBSKAP044SatpenIKM" target="blank"><b-icon-book></b-icon-book> Satuan
                Pendidikan Pelaksana Implementasi Kurikulum Merdeka</a></p>
            <p><a href="https://bit.ly/PanduanImplementasiBK" target="blank"><b-icon-book></b-icon-book> Panduan
                Impelementasi BK</a></p>
          </b-card-text>
        </b-tab>
        <b-tab>
          <template #title>
            <b-icon-terminal></b-icon-terminal> UPDATER
          </template>
          <b-card-text>
            <h3>Panduan Update Aplikasi (Pengguna Windows)</h3>
            <ol class="ps-1" type="a">
              <li><strong>Manual</strong>
                <ul style="padding-left: 10px;">
                  <li>Buka Command Prompt (CMD) Run as Administrator</li>
                  <li>Ketik <code>cd C:\eRaporSMK\dataweb</code> [enter]</li>
                  <li>Ketik <code>git stash</code> [enter]</li>
                  <li>Ketik <code>git clean -df</code> [enter]</li>
                  <li>Ketik <code>git pull origin main</code> [enter]. Tunggu sampai proses update file dari github
                    selesai</li>
                  <li>Ketik <code>composer update</code> [enter]</li>
                  <li>Ketik <code>php artisan erapor:update</code>. Tunggu sampai proses update versi aplikasi selesai.
                  </li>
                  <li>Pastikan di akhir informasi di Command Prompt, versi aplikasi sudah berubah</li>
                  <li>Cek kembali aplikasi e-Rapor SMK, jika ada yang gagal silahkan laporkan ke Tim Helpdesk</li>
                </ul>
              </li>
              <br>
              <li><strong>Menggunakan file .bat</strong>
                <ul style="padding-left: 10px;">
                  <li>Silahkan download file <strong>updater e-Rapor SMK V6.0.1.bat</strong> <a
                      href="https://drive.google.com/file/d/1cBZWtlGqv_bgRFa3CJnVCXzpaGVlg1u1/view"
                      target="_blank">disini</a>.</li>
                  <li>Buka file <strong>updater e-Rapor SMK V6.0.1.bat</strong> dengan cara klik kanan dan pilih Run as
                    Administartor.</li>
                  <li>Tunggu sampai proses update versi aplikasi selesai.</li>
                </ul>
              </li>
            </ol>
            <h3>Panduan Update Aplikasi (Pengguna Linux)</h3>
            <ul style="padding-left: 10px;">
              <li>Buka aplikasi Putty, jika belum ada, silahkan unduh <a
                  href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank">disini</a>
                kemudian install</li>
              <li>Login ke SSH menggunakan username &amp; password yang dimiliki</li>
              <li>Masuk ke root direktori aplikasi e-Rapor SMK di install.(Contoh <code>cd /var/www/html/erapor</code>
                [enter])</li>
              <li>Ketik <code>git stash</code> [enter]</li>
              <li>Ketik <code>git clean -df</code> [enter]</li>
              <li>Ketik <code>git pull origin main</code> [enter]. Tunggu sampai proses update file dari github selesai.
              </li>
              <li>Ketik <code>composer update</code> [enter]</li>
              <li>Ketik <code>php artisan erapor:update</code>. Tunggu sampai proses update versi aplikasi selesai.</li>
              <li>Pastikan di akhir informasi di SSH, versi aplikasi sudah berubah</li>
              <li>Cek kembali aplikasi e-Rapor SMK, jika ada yang gagal silahkan laporkan ke Tim Helpdesk</li>
            </ul>
          </b-card-text>
        </b-tab>
        <!--b-tab>
          <template #title>
            <b-icon-hdd></b-icon-hdd> DATA DAPODIK
          </template>
          <b-card-text>
            <h3>Unduh Data Dapodik</h3>
            <b-form @submit="onSubmit" @reset="onReset" v-if="show">
              <b-form-group id="npsn" label="NPSN" label-for="npsn">
                <b-form-input id="npsn" v-model="form.npsn" type="text" placeholder="NPSN" required></b-form-input>
              </b-form-group>
              <b-form-group id="input-group-1" label="Akun Dapodik" label-for="input-1">
                <b-form-input id="input-1" v-model="form.email" type="email" placeholder="Akun Dapodik"
                  required></b-form-input>
              </b-form-group>
              <b-form-group id="input-group-2" label="Password Dapodik" label-for="input-2">
                <b-form-input type="password" id="input-2" v-model="form.password" placeholder="Password Dapodik"
                  required></b-form-input>
              </b-form-group>
              <b-button type="submit" variant="primary">Submit</b-button>
              <b-button type="reset" variant="danger">Reset</b-button>
            </b-form>
            <b-alert show variant="danger" class="mt-1" v-if="alert">
              <div class="alert-body">{{ alert_text }}
              </div>
            </b-alert>
          </b-card-text>
        </b-tab-->
      </b-tabs>
    </b-card-body>
  </b-card>
</template>

<script>
import {
  BCard, BCardBody, BTabs, BTab, BCardText, BButton, BIcon, BIconLightning, BIconFolder2, BIconTerminal, BIconDownload, BIconBook, BRow, BCol, BIconHdd, BForm, BFormGroup, BFormInput, BAlert
} from 'bootstrap-vue'
import Ripple from 'vue-ripple-directive'

export default {
  components: {
    BCard,
    BCardBody,
    BTabs,
    BTab,
    BCardText,
    BButton,
    BIcon,
    BIconLightning,
    BIconFolder2,
    BIconTerminal,
    BIconDownload,
    BRow,
    BCol,
    BIconBook,
    BIconHdd,
    BForm,
    BFormGroup,
    BFormInput,
    BAlert
  },
  directives: {
    Ripple,
  },
  props: {
    headerData: {
      type: Object,
      default: () => { },
    },
  },
  data() {
    return {
      form: {
        npsn: '20579411',
        email: 'masadi.com@gmail.com',
        password: '12345678',
      },
      show: true,
      alert: false,
      alert_text: ''
    }
  },
  methods: {
    onSubmit(event) {
      event.preventDefault()
      //alert(JSON.stringify(this.form))
      this.$http.post('/dashboard/data-dapodik', {
        npsn: this.form.npsn,
        email: this.form.email,
        password: this.form.password
      }).then(response => {
        var data = response.data;
        console.log(data);
        if (data.data) {
          this.alert = false
          this.alert_text = ''
          /*this.$http.post('/dashboard/ambil-data', {
            npsn: this.form.npsn,
            email: this.form.email,
            password: this.form.password,
            sekolah_id: data.data.sekolah_id
          });*/
          this.ambil_data(this.form.npsn, this.form.email, this.form.password, data.data.sekolah_id)
        } else {
          this.alert = true
          this.alert_text = data.message
        }
      }).catch(error => {
        console.log(error);
      });
    },
    onReset(event) {
      event.preventDefault()
      // Reset our form values
      this.form.email = ''
      this.form.password = ''
      // Trick to reset/clear native browser form validation state
      this.show = false
      this.$nextTick(() => {
        this.show = true
      })
    },
    ambil_data(npsn, email, password, sekolah_id) {
      var data = [
        'sekolah',
        'ptk',
        'rombongan-belajar',
        'peserta-didik-aktif',
        'peserta-didik-keluar',
        'anggota-rombel-pilihan',
        'pembelajaran',
        'ekstrakurikuler',
        'anggota-ekskul',
        'dudi'
      ];
      console.log(data);
    }
  },
}
</script>
